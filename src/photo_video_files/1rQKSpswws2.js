if (self.CavalryLogger) { CavalryLogger.start_js(["Z6MGM"]); }

__d("LiveVideoBroadcastBody.react",["ix","cx","fbt","CurrentUser","DateConsts","DOMContainer.react","Image.react","ImageBlock.react","InlineBlock.react","Layout.react","LeftRight.react","Link.react","LiveVideoBroadcastActions","LiveVideoBroadcastAPIRHCContainer.react","LiveVideoBroadcastAPIToggleContainer.react","LiveVideoBroadcastAPIVideo.react","LiveVideoBroadcastAPIVideoContainer.react","LiveVideoBroadcastAPIVideoPreviewContainer.react","LiveVideoBroadcastBrokenConnectionModalOverlay.react","LiveVideoBroadcastCameraGoLiveButton.react","LiveVideoBroadcastCameraNotAllowedMessage.react","LiveVideoBroadcastCameraNotFoundMessage.react","LiveVideoBroadcastComposerDialog.react","LiveVideoBroadcastComposerRHC.react","LiveVideoBroadcastConstants","LiveVideoBroadcastCopyrightTakedownVideoOverlay.react","LiveVideoBroadcastCopyrightViolationModalOverlayContainer.react","LiveVideoBroadcastCouldNotStartBroadcastModalOverlay.react","LiveVideoBroadcastDescription.react","LiveVideoBroadcastEditRHCButtonContainer.react","LiveVideoBroadcastEndingModalOverlay.react","LiveVideoBroadcastFailedConnectionModalOverlay.react","LiveVideoBroadcastFinishedVideoOverlay.react","LiveVideoBroadcastLiveIndicatorOverlay.react","LiveVideoBroadcastPollsConfig","LiveVideoBroadcastPublishFailureModalOverlay.react","LiveVideoBroadcastRequestCameraAccessMessage.react","LiveVideoBroadcastUFI.react","LiveVideoInviteFriendsDialogContainer.react","React","ReactComposerLiveBroadcastErrorLogs.react","ScheduledLiveTimeStringUtil","ShareModeConst","StreamingReactionsTray","Timestamp.react","XUIAmbientNUX.react","XUIButton.react","XUIText.react","XVideoPermalinkController","assignMediaStream","expectationViolation","fbglyph","joinClasses"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k=b("LiveVideoBroadcastPollsConfig").pollExecutionSectionModule,l=b("Layout.react").Column,m=b("Layout.react").FillColumn,n=b("LiveVideoBroadcastConstants").BROADCAST_STATE,o=b("LiveVideoBroadcastConstants").CAMERA_STATE,p=b("LiveVideoBroadcastConstants").INPUT_SOURCE;c=babelHelpers.inherits(a,b("React").Component);j=c&&c.prototype;function a(a){j.constructor.call(this,a),this.state={hasAssignedMediaStream:!1,showFinishNux:!1,streamingReactionsInitialized:!1,showEventLogDialog:!1},this.$18=function(a){if(this.state.streamingReactionsInitialized||!a||!this.props.feedbackID||!this.props.broadcastID)return;new(b("StreamingReactionsTray"))(a,null,"",this.props.feedbackID,this.props.broadcastID,"",{},!0,!0,!0);this.setState({streamingReactionsInitialized:!0})}.bind(this),this.$14=function(){Date.now()-this.props.startTime<b("LiveVideoBroadcastConstants").MINIMUM_BROADCAST_LENGTH_MS?(this.setState({showFinishNux:!0}),setTimeout(function(){return this.setState({showFinishNux:!1})}.bind(this),b("LiveVideoBroadcastConstants").FINISH_BUTTON_NUX_TIME_MS)):this.props.onFinishButtonClick()}.bind(this),this.$26=function(){this.setState({showEventLogDialog:!1})}.bind(this),this.$13=function(){this.setState({showEventLogDialog:!0})}.bind(this),this.$4=i._("End Live Video"),this.$2=i._("Resume"),this.$1=i._("Invite Friends"),this.$3=i._("Live Viewers").toString(),this.$5=b("React").createRef()}a.prototype.componentDidUpdate=function(a,c){this.$5.current&&(!this.state.hasAssignedMediaStream||this.props.mediaStream!==a.mediaStream)&&(b("assignMediaStream")(this.$5.current,this.props.mediaStream),this.setState({hasAssignedMediaStream:!0}))};a.prototype.render=function(){if(this.props.inputSource===p.CAMERA)return this.$6();return this.props.inputSource===p.EDIT_SCHEDULE&&this.props.isCrosspost?this.$7():this.$8()};a.prototype.$6=function(){__p&&__p();var a;if(this.props.gks&&!this.props.gks.www_live_video_broadcasting_supported_browsers){a=b("React").createElement("div",null,b("React").createElement(b("LiveVideoBroadcastAPIToggleContainer.react"),{hasGamingContext:this.props.hasGamingContext}),b("React").createElement("div",{className:"_620d"},i._("Please try broadcasting on the latest desktop version of Chrome or Firefox to go live with your camera.")));return a}switch(this.props.cameraState){case o.CHECK_CAMERA_ACCESS:a=null;break;case o.REQUEST_CAMERA_ACCESS:a=b("React").createElement("div",null,b("React").createElement(b("LiveVideoBroadcastAPIToggleContainer.react"),{hasGamingContext:this.props.hasGamingContext}),b("React").createElement(b("LiveVideoBroadcastRequestCameraAccessMessage.react"),null));break;case o.CAMERA_NOT_FOUND:a=b("React").createElement("div",null,b("React").createElement(b("LiveVideoBroadcastAPIToggleContainer.react"),{hasGamingContext:this.props.hasGamingContext}),b("React").createElement(b("LiveVideoBroadcastCameraNotFoundMessage.react"),{missingCamera:!0}));break;case o.MICROPHONE_NOT_FOUND:a=b("React").createElement("div",null,b("React").createElement(b("LiveVideoBroadcastAPIToggleContainer.react"),{hasGamingContext:this.props.hasGamingContext}),b("React").createElement(b("LiveVideoBroadcastCameraNotFoundMessage.react"),{missingMicrophone:!0}));break;case o.CAMERA_NOT_ALLOWED:a=b("React").createElement("div",null,b("React").createElement(b("LiveVideoBroadcastAPIToggleContainer.react"),{hasGamingContext:this.props.hasGamingContext}),b("React").createElement(b("LiveVideoBroadcastCameraNotAllowedMessage.react"),null));break;case o.BROADCAST:a=this.$8()}return a};a.prototype.$8=function(){if(this.props.broadcastState===n.PREVIEW)return this.$9();var a;this.props.copyrightTriggered?a=b("React").createElement(b("LiveVideoBroadcastCopyrightViolationModalOverlayContainer.react"),null):this.props.broadcastCouldNotStart&&(a=b("React").createElement(b("LiveVideoBroadcastCouldNotStartBroadcastModalOverlay.react"),{buttonText:this.$2,onActionButtonClick:b("LiveVideoBroadcastActions").errorBroadcastCouldNotStartAccepted}));return b("React").createElement("div",{className:"_1drg"},b("React").createElement(b("Layout.react"),{className:"_1drh"},b("React").createElement(m,null,this.$10()),this.$11()),this.$12(),a)};a.prototype.$12=function(){__p&&__p();var a,c;switch(this.props.broadcastState){case n.EDITING:a=b("React").createElement(b("LiveVideoBroadcastEditRHCButtonContainer.react"),null);break;case n.LIVE:if(this.props.errorCount){var d=i._("Event Logs ({event_count})",[i._param("event_count",this.props.errorCount)]);c=b("React").createElement(b("XUIButton.react"),{className:"_6rd8",label:d,use:"default",onClick:this.$13})}d=this.props.canEndLiveVideo?b("React").createElement(b("XUIButton.react"),{className:"_5yoa _1drf","data-testid":"finish-button",label:this.$4,ref:"finishbutton",size:"xlarge",use:"confirm",onClick:this.$14}):null;a=b("React").createElement("div",{className:"_1drl"},d,this.$15(),this.props.escapeKeyNux);break;default:break}return b("React").createElement("div",{className:"_5zjh"},b("React").createElement(b("LeftRight.react"),null,b("React").createElement("div",{className:"_1drk"},this.$16(),c,this.$17()),b("React").createElement("div",{className:"_2v03"},a)))};a.prototype.$10=function(){var a;this.props.inputSource===p.API||this.props.inputSource===p.VIDEO_GAME||this.props.inputSource===p.EDIT_SCHEDULE?a=b("React").createElement(b("LiveVideoBroadcastAPIVideoContainer.react"),null):this.props.inputSource===p.EDIT?a=b("React").createElement(b("LiveVideoBroadcastAPIVideo.react"),{videoID:this.props.videoID}):a=b("React").createElement("video",{autoPlay:!0,className:"_1drj",muted:!0,ref:this.$5});var c=this.props.feedbackID&&this.props.broadcastID?b("React").createElement("div",{className:"_3ah- _6axe",ref:this.$18}):null;a=b("React").createElement("div",{className:"_5yoo"},a);return b("React").createElement("div",{className:"_1dri"},a,this.$19(),c)};a.prototype.$19=function(){__p&&__p();var a;switch(this.props.broadcastState){case n.EDITING:a=this.props.videoID?b("React").createElement(b("LiveVideoBroadcastLiveIndicatorOverlay.react"),{startTime:this.props.startTime,useLocalTime:!0,videoID:this.props.videoID}):null;break;case n.LIVE:a=this.props.videoID?b("React").createElement(b("LiveVideoBroadcastLiveIndicatorOverlay.react"),{startTime:this.props.startTime,useLocalTime:!0,videoID:this.props.videoID}):null;break;case n.FINISHING:a=b("React").createElement(b("LiveVideoBroadcastEndingModalOverlay.react"),null);break;case n.FINISHED:a=b("React").createElement(b("LiveVideoBroadcastFinishedVideoOverlay.react"),{dialog:this.props.dialog,inputSource:this.props.inputSource,shareMode:this.props.shareMode,showContent:!0,vodReady:this.props.vodReady});break}if(this.props.copyrightTriggered)return a;else if(this.props.broadcastEndedWithCopyrightViolation)a=b("React").createElement(b("LiveVideoBroadcastCopyrightTakedownVideoOverlay.react"),null);else if(this.props.connectionFailed&&(this.props.broadcastState===n.LIVE||this.props.broadcastState===n.EDITING))a=b("React").createElement(b("LiveVideoBroadcastFailedConnectionModalOverlay.react"),{dialog:this.props.dialog,inputSource:this.props.inputSource,vodReady:!1});else if(this.props.connectionBroken&&(this.props.broadcastState===n.LIVE||this.props.broadcastState===n.EDITING))a=b("React").createElement(b("LiveVideoBroadcastBrokenConnectionModalOverlay.react"),null);else if(this.props.broadcastCouldNotStart)return a;else this.props.broadcastCouldNotPublish&&(a=b("React").createElement(b("LiveVideoBroadcastPublishFailureModalOverlay.react"),null));return a};a.prototype.$20=function(){var a=b("React").createElement("span",{className:(this.props.broadcastState!==n.LIVE?"_t2a":"")+" _3i3a"},b("React").createElement(b("DOMContainer.react"),null,this.props.profileLink)),c=b("XVideoPermalinkController").getURIBuilder().setInt("video_id",this.props.videoID).setString("vanity",this.props.actorID).getURI();c=this.props.broadcastState===n.LIVE?b("React").createElement(b("Link.react"),{className:"_3hte",href:c,target:"_blank"},b("React").createElement(b("Timestamp.react"),{time:this.props.startTime/b("DateConsts").MS_PER_SEC})):null;var d=this.props.privacySelector?b("React").createElement(b("DOMContainer.react"),{className:"_2c5s"},this.props.privacySelector):null,e=i._("Invite Friends To Watch");e=this.$21()&&this.props.videoID?b("React").createElement(b("LiveVideoInviteFriendsDialogContainer.react"),{inviteFriendsTitle:e,videoId:this.props.videoID}):null;return b("React").createElement(l,{className:"_1dtf"},b("React").createElement("div",{className:"_5yoj"},b("React").createElement(b("ImageBlock.react"),{className:"_zga"},b("React").createElement(b("Image.react"),{className:"_3i39",height:40,src:this.props.profilePicUri,width:40}),b("React").createElement(b("InlineBlock.react"),{alignv:"middle",height:40},a,b("React").createElement(b("DOMContainer.react"),null,this.props.tagList),d,c))),b("React").createElement(b("LiveVideoBroadcastDescription.react"),{description:this.props.description,isDescriptionExpanded:this.props.isDescriptionExpanded,shortDescription:this.props.shortDescription}),this.props.gks!=null&&this.props.videoID!=null&&this.props.videoID.length>0&&this.props.accountID!=null&&(this.props.broadcastState===n.LIVE||this.props.broadcastState===n.FINISHED||this.props.broadcastState===n.FINISHING)&&k&&this.props.gks.show_tools_tab?b("React").createElement(k,{accountID:this.props.accountID,actorID:this.props.actorID,broadcastState:this.props.broadcastState,videoID:this.props.videoID}):null,b("React").createElement(b("LiveVideoBroadcastUFI.react"),{showPlaceholder:!!this.props.ufiMarkup,ufiConfig:this.props.ufiConfig,ufiMarkup:this.props.ufiMarkup,onNewCommentsPillClick:this.props.onNewCommentsPillClick}),e)};a.prototype.$9=function(){var a,c;this.props.composerConfig&&this.props.inputSource===p.CAMERA?(a=this.$22(),c=this.$23()):this.props.inputSource===p.API||this.props.inputSource===p.EDIT_SCHEDULE?(a=b("React").createElement(b("LiveVideoBroadcastAPIVideoPreviewContainer.react"),{hasGamingContext:this.props.hasGamingContext}),c=b("React").createElement(b("LiveVideoBroadcastAPIRHCContainer.react"),null)):this.props.inputSource===p.VIDEO_GAME?(a=b("React").createElement(b("LiveVideoBroadcastAPIVideoPreviewContainer.react"),{hasGamingContext:!0}),c=b("React").createElement(b("LiveVideoBroadcastAPIRHCContainer.react"),{hasGamingContext:!0})):b("expectationViolation")("LiveVideoBroadcast should always have a composer config and a valid input source");return b("React").createElement("div",{className:"_5zrk"},b("React").createElement("div",{className:"_t42"},b("React").createElement(b("Layout.react"),{className:"_w10"},a,c)))};a.prototype.$11=function(){var a;this.props.broadcastState===n.EDITING?a=b("React").createElement(b("LiveVideoBroadcastAPIRHCContainer.react"),null):a=this.props.inputSource===p.EDIT&&!this.props.actorID?this.$24():this.$20();return a};a.prototype.$23=function(){if(!this.props.composerConfig)return null;var a=b("React").createElement(b("LiveVideoBroadcastCameraGoLiveButton.react"),{actorID:this.props.actorID,broadcastID:this.props.broadcastID,broadcastState:this.props.broadcastState,canEnableLiveCoverVideo:this.props.canEnableLiveCoverVideo,config:this.props.composerConfig.config,contextConfig:this.props.composerConfig.contextConfig,countdownTime:this.props.countdownTime,isLiveCoverVideoEnabled:this.props.isLiveCoverVideoEnabled,isUpdateRequestPending:this.props.isUpdateRequestPending,metadataConfig:this.props.metadataConfig,showNUX:this.props.showNUX,onActionButtonClick:this.props.onActionButtonClick,onNUXCloseButtonClick:this.props.onNUXCloseButtonClick});return b("React").createElement(b("LiveVideoBroadcastComposerRHC.react"),{accountID:this.props.accountID,actionButton:a,actorID:this.props.actorID,areModerationOptionsShown:this.props.gks!=null&&this.props.gks.can_see_moderation_options,broadcastID:this.props.broadcastID,broadcastState:this.props.broadcastState,broadcasterName:this.props.broadcasterName,canEnableLiveCoverVideo:this.props.canEnableLiveCoverVideo,canSeeIGMatches:this.props.gks!=null&&this.props.gks.can_see_ig_matches,commentModes:this.props.commentModes,composerPrivacySelector:this.props.composerPrivacySelector,config:this.props.composerConfig.config,contextConfig:this.props.composerConfig.contextConfig,embedHTML:this.props.embedHTML,enableTaggers:!this.props.countdownTime,fundraiserEnabled:this.props.fundraiserEnabled,isBroadcastStarting:!!this.props.countdownTime||this.props.isUpdateRequestPending,isLiveCoverVideoEnabled:!!this.props.isLiveCoverVideoEnabled,peopleTaggerSource:this.props.peopleTaggerSource,profilePicUri:this.props.profilePicUri,selectedRHCTab:this.props.selectedRHCTab,selectedVideoInputSource:this.props.selectedVideoInputSource,shareMode:this.props.shareMode,showLiveChallengeSelector:this.props.gks!=null&&this.props.gks.show_live_challenges,showLiveSettings:!1,showMetadataInput:!0,showScreenSharingOption:this.props.gks!=null&&this.props.gks.live_www_broadcasting_screen_sharing,showToolsTab:this.props.gks!=null&&this.props.gks.show_tools_tab,showVideoSettings:!0,sponsorConfig:this.props.sponsorConfig,sponsorEnabled:this.props.sponsorEnabled,targetID:this.props.targetID,targetSelectorProps:this.props.targetSelectorProps,targetingEnabled:this.props.targetingEnabled})};a.prototype.$22=function(){return b("React").createElement(b("LiveVideoBroadcastComposerDialog.react"),{countdownTime:this.props.countdownTime,hasGamingContext:this.props.hasGamingContext,isUpdateRequestPending:this.props.isUpdateRequestPending,mediaStream:this.props.mediaStream})};a.prototype.$21=function(){return this.props.broadcastState!==n.LIVE||b("CurrentUser").isWorkUser()||this.props.shareMode===b("ShareModeConst").PAGE||!this.props.ufiMarkup?!1:!0};a.prototype.$16=function(){if(!this.$21())return null;var a=b("React").createElement(b("Image.react"),{src:g("113395")});return b("React").createElement(b("XUIButton.react"),{className:"_1r3e",image:a,label:this.$1,size:"xlarge",onClick:this.$25})};a.prototype.$7=function(){var a=this.props.scheduledLiveCrosspostPayload;a=a?b("React").createElement("div",{className:"_2nno"},b("React").createElement(b("Image.react"),{className:"_3_-n",src:a.backgroundImageURL}),b("React").createElement(b("Image.react"),{className:"_3_-_",src:a.profileImageURL}),b("React").createElement("div",{className:"_3__3"}),b("React").createElement("div",{className:"_3__4"},b("React").createElement(b("XUIText.react"),{className:"_3__5",color:"white",display:"block",size:"header2"},b("ScheduledLiveTimeStringUtil").getStr(a.plannedStartTime)),b("React").createElement(b("XUIText.react"),{className:"_3__5",color:"white",display:"block",size:"header3",weight:"bold"},i._("{broadcaster_name} plans to go live.",[i._param("broadcaster_name",a.profileName)])),b("React").createElement(b("XUIText.react"),{className:b("joinClasses")("_3__5","_3__7"),display:"block",size:"body2"},i._("Your crosspost of this scheduled live video will start playing as soon as the other Page goes live.")))):null;return b("React").createElement("div",{className:"_5zrk"},b("React").createElement("div",{className:"_t42"},b("React").createElement(b("Layout.react"),{className:"_w10"},a,b("React").createElement(b("LiveVideoBroadcastAPIRHCContainer.react"),null))))};a.prototype.$15=function(){return b("React").createElement(b("XUIAmbientNUX.react"),{contextRef:function(){return this.refs.finishbutton}.bind(this),position:"above",shown:this.state.showFinishNux,width:"auto",onCloseButtonClick:function(){return this.setState({showFinishNux:!1})}.bind(this)},i._("Live videos must be at least 4 seconds long"))};a.prototype.$24=function(){return b("React").createElement(l,{className:"_1dtf"})};a.prototype.$25=function(){b("LiveVideoBroadcastActions").setInviteFriendsShown(!0)};a.prototype.$17=function(){return!this.state.showEventLogDialog||!this.props.broadcastID||!this.props.accessToken?null:b("React").createElement(b("ReactComposerLiveBroadcastErrorLogs.react"),{accessToken:this.props.accessToken,broadcastID:this.props.broadcastID,errorNumber:this.props.errorCount||0,shown:this.state.showEventLogDialog,onToggle:this.$26})};e.exports=a}),null);