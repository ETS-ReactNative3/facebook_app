if (self.CavalryLogger) { CavalryLogger.start_js(["gX0\/E"]); }

__d("LiveVideoBroadcast.react",["ix","cx","fbt","AsyncDialog","AsyncRequest","Event","FBConfirmDialog.react","Image.react","Keys","Link.react","LiveVideoBroadcastActions","LiveVideoBroadcastBodyContainer.react","LiveVideoBroadcastConstants","LiveVideoBroadcastSaveChangesDialogContainer.react","PageContentTabAccessToken","PopoverMenu.react","React","ReactComposerContextProviderMixin","ReactXUIMenu","ShareModeConst","SUIBusinessThemeContainer.react","XLiveVideoBroadcastInsightsDialogController","XUIAmbientNUX.react","asset","fbglyph","ReactComposerContextTypes"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k=b("ReactXUIMenu").Item,l=b("LiveVideoBroadcastConstants").BROADCAST_STATE,m=b("LiveVideoBroadcastConstants").INPUT_SOURCE;c=babelHelpers.inherits(a,b("React").Component);j=c&&c.prototype;function a(a){j.constructor.call(this,a),this.state={showEndDialog:!1,showEscapeKeyNux:!1},this.$8=function(){this.props.accessToken&&b("PageContentTabAccessToken").init(this.props.accessToken,this.props.accessToken,"");var a=b("XLiveVideoBroadcastInsightsDialogController").getURIBuilder().setFBID("video_id",this.props.videoID).setFBID("page_id",this.props.targetID).getURI();b("AsyncDialog").send(new(b("AsyncRequest"))(a))}.bind(this),this.$12=function(){this.props.onActionButtonClick(),this.setState({showEndDialog:!1})}.bind(this),this.$11=function(){this.setState({showEndDialog:!1})}.bind(this),this.$2=function(){this.props.inputSource===m.EDIT_SCHEDULE?b("LiveVideoBroadcastActions").setShowSaveChangesDialog(!0):b("LiveVideoBroadcastActions").cleanup()}.bind(this),this.$13=function(){this.setState({showEndDialog:!0})}.bind(this),this.props.dialog&&this.props.dialog.subscribe("key",this.$1.bind(this))}a.prototype.$1=function(a,event){__p&&__p();if(b("Event").getKeyCode(event)!==b("Keys").ESC)return;if(this.props.broadcastState===l.LIVE){this.setState({showEscapeKeyNux:!0});setTimeout(function(){return this.setState({showEscapeKeyNux:!1})}.bind(this),b("LiveVideoBroadcastConstants").FINISH_BUTTON_NUX_TIME_MS);return}else if(this.props.countdownTime)return;this.$2()};a.prototype.$3=function(){return this.refs.finishbutton==null?null:b("React").createElement(b("XUIAmbientNUX.react"),{contextRef:function(){return this.refs.finishbutton}.bind(this),position:"left",shown:this.state.showEscapeKeyNux,width:"auto",onCloseButtonClick:function(){return this.setState({showEscapeKeyNux:!1})}.bind(this)},i._("Click End Live Video to end your broadcast"))};a.prototype.$4=function(){b("LiveVideoBroadcastActions").setShowSaveChangesDialog(!1)};a.prototype.$5=function(){return!this.props.showSaveChangesDialog?null:b("React").createElement(b("LiveVideoBroadcastSaveChangesDialogContainer.react"),{onError:this.$4})};a.prototype.$6=function(){return this.props.broadcastState===l.LIVE||this.props.broadcastState===l.READY_TO_LIVE||this.props.broadcastState===l.FINISHING||this.props.broadcastState===l.EDITING||this.props.countdownTime||this.props.isUpdateRequestPending?null:b("React").createElement(b("Link.react"),{className:"_2k_f",href:"#",onClick:this.$2},b("React").createElement(b("Image.react"),{alt:i._("Close"),src:g("125921")}))};a.prototype.$7=function(){var a=this.props.shareMode===b("ShareModeConst").PAGE;if(this.props.broadcastState!==l.LIVE||!this.props.ufiMarkup)return null;a=a?b("React").createElement(k,{onClick:this.$8},i._("See video insights")):null;var c=this.props.inputSource===m.API||this.props.inputSource===m.EDIT?b("React").createElement(k,{onClick:this.$2},i._("Close")):null;c=b("React").createElement(b("ReactXUIMenu"),null,b("React").createElement(k,{onClick:this.$9},i._("Edit post")),c,a);return b("React").createElement(b("PopoverMenu.react"),{alignh:"right",alignv:"baseline",menu:c},b("React").createElement(b("Link.react"),{className:"_2k_f",href:"#"},b("React").createElement(b("Image.react"),{src:g("363611")})))};a.prototype.$9=function(){b("LiveVideoBroadcastActions").setBroadcastState(l.EDITING)};a.prototype.$10=function(){return!this.state.showEndDialog?null:b("React").createElement(b("FBConfirmDialog.react"),{confirmButtonText:i._("End"),content:i._("If you end this live video now, you'll be able to choose if you want to save or delete it."),"data-testid":"end-dialog",shown:!0,title:i._("Do You Want to End This Live Video?"),onCancel:this.$11,onConfirm:this.$12,onToggle:this.$11})};a.prototype.render=function(){var a=this.$3();a=b("React").createElement(b("LiveVideoBroadcastBodyContainer.react"),{escapeKeyNux:a,onActionButtonClick:this.props.onActionButtonClick,onFinishButtonClick:this.$13,onNUXCloseButtonClick:this.props.onNUXCloseButtonClick,onNewCommentsPillClick:this.props.onNewCommentsPillClick});return b("React").createElement(b("SUIBusinessThemeContainer.react"),null,b("React").createElement("div",{className:"_358d","data-testid":"live-video-broadcast-ui-container"},a,this.$6(),this.$7(),this.$5(),this.$10()))};a.prototype.getChildContext=function(){return b("ReactComposerContextProviderMixin").getChildContext.bind(this)()};a.childContextTypes=b("ReactComposerContextTypes");e.exports=a}),null);