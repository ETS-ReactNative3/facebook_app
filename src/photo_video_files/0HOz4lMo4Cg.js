if (self.CavalryLogger) { CavalryLogger.start_js(["ub\/jq"]); }

__d("FBStoriesTheaterContainer.react",["FBStoriesActions","FBStoriesLiveVideoActions","FBStoriesLoggingConstants","FBStoriesLoggingHelper","FBStoriesStore","FBStoriesTheater.react","FBStoriesViewerHelper","FluxContainer","React","UFIRootRegistry"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h={isStoryMuted:!1,currentThreadID:null,isOwnBucket:!1,selectedBucketIsLive:!1};c=babelHelpers.inherits(a,b("React").Component);g=c&&c.prototype;function a(){var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=g.constructor).call.apply(a,[this].concat(e)),this.$1=b("FBStoriesLoggingConstants").SOURCE_CLOSE_FROM_MODAL,this.$2=b("FBStoriesLoggingConstants").GESTURES.CLOSE_STORY.CLOSE_BUTTON_EXIT,this.state=h,this.$4=function(){this.$1=b("FBStoriesLoggingConstants").SOURCE_CLOSE_FROM_MODAL_CLOSE_BUTTON,this.$2=b("FBStoriesLoggingConstants").GESTURES.CLOSE_STORY.CLOSE_BUTTON_EXIT,b("FBStoriesViewerHelper").toggleViewer(!1,null)}.bind(this),this.$5=function(){this.$1=b("FBStoriesLoggingConstants").SOURCE_CLOSE_FROM_LAST_STORY_FINISHING,this.$2=b("FBStoriesLoggingConstants").GESTURES.CLOSE_STORY.AUTO_EXIT,b("FBStoriesLoggingHelper").closeStoryLog(this.$2,this.$1),b("FBStoriesViewerHelper").toggleViewer(!1,null)}.bind(this),this.$6=function(){this.setState(function(a){return{isStoryMuted:!a.isStoryMuted}})}.bind(this),c}a.getStores=function(){return[b("FBStoriesStore")]};a.calculateState=function(a){return!b("FBStoriesStore").isViewerOpen()?a?a:h:{isStoryMuted:a?a.isStoryMuted:!1,currentThreadID:b("FBStoriesStore").getCurrentThreadIDForSelectedBucket(),isOwnBucket:b("FBStoriesStore").isOwnBucket(),selectedBucketIsLive:b("FBStoriesStore").isSelectedBucketLive()}};a.prototype.render=function(){return b("React").createElement(b("FBStoriesTheater.react"),{onHide:this.$3.bind(this),onClose:this.$4,onDone:this.$5,onMute:this.$6,isStoryMuted:this.state.isStoryMuted,openComposerForProduction:this.props.openComposerForProduction})};a.prototype.$3=function(){this.$2!==b("FBStoriesLoggingConstants").GESTURES.CLOSE_STORY.AUTO_EXIT&&b("FBStoriesLoggingHelper").closeStoryLog(this.$2,this.$1),b("FBStoriesViewerHelper").toggleViewer(!1,null),this.$7()};a.prototype.$7=function(){b("FBStoriesActions").markCurrentThreadAsSeen(),this.state.selectedBucketIsLive&&b("FBStoriesActions").removeEndedLiveVideo(),b("FBStoriesActions").unselectBucket(),b("FBStoriesLiveVideoActions").removeUIComponents(),b("UFIRootRegistry").cleanupSnowliftNodes(),this.props.onClose()};e.exports=b("FluxContainer").create(a)}),null);