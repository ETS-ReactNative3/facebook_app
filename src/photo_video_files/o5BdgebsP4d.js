if (self.CavalryLogger) { CavalryLogger.start_js(["2KEcm"]); }

__d("P2PBannerStore",["invariant","EventEmitter","P2PActionConstants","P2PAPI","P2PDispatcher"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i={},j=!1,k=!1;c=babelHelpers.inherits(a,b("EventEmitter"));h=c&&c.prototype;function a(){h.constructor.call(this),b("P2PDispatcher").register(this.onEventDispatched.bind(this))}a.prototype.onEventDispatched=function(a){__p&&__p();var c=a.type;a=a.data;switch(c){case b("P2PActionConstants").BANNER_STATES_UPDATED:this.handleBannerStatesUpdated(a);this.emit("change");break;case b("P2PActionConstants").BANNER_DISMISSED:this.handleBannerDismissed(a);this.emit("change");break;case b("P2PActionConstants").BANNER_COMPLETED:this.handleBannerCompleted(a);this.emit("change");break}};a.prototype.handleBannerStatesUpdated=function(a){j=!0,i=a};a.prototype.handleBannerDismissed=function(a){a=this.getBannerState(a);a.hasBeenDismissed=!0};a.prototype.shouldShowBanner=function(a){if(!k){b("P2PAPI").getBannerStates();k=!0;return!1}if(!j)return!1;a=this.getBannerState(a);return a.eligible&&!a.hasBeenDismissed};a.prototype.handleBannerCompleted=function(a){a=this.getBannerState(a);a.eligible=!1};a.prototype.getBannerState=function(a){var b=i[a];b||g(0,undefined,a);return b};e.exports=new a()}),null);