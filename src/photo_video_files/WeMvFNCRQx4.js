if (self.CavalryLogger) { CavalryLogger.start_js(["chG9x"]); }

__d("FBStoriesCardVideoMedia.react",["cx","BlurredBackgroundImage.react","CameraPostTypes","EventListener","FBLogger","FBStoriesActions","FBStoriesVideoHelper","React","SubscriptionsHandler","VideoComponentAutoPlayControl.react","VideoComponentCommercialBreakLiveTransitionOverlay.react","VideoComponentCommercialBreakVideoAdOverlay.react","VideoComponentLiveAudioAnimation.react","VideoComponentLiveEndScreen.react","VideoComponentLiveInterruptedScreen.react","VideoComponentLiveVideoIndicator.react","VideoComponentStreamingReactionTray.react","VideoComponentWithCommercialBreak.react","VideoComponentWithInstreamVideo.react","VideoComponentWithLiveBroadcast.react","VideoDataContainer.react","VideoPlayer.react","VideoPlayerController","VideoPlayerLoggerSource","VideoPlayerReason","VideoPlayerReasonTransitionHelper","VideoPlayerStates","XUISpinner.react","emptyFunction"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=babelHelpers.inherits(a,b("React").Component);h=c&&c.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=h.constructor).call.apply(a,[this].concat(e)),this.state={showLoadingSpinner:!1},this.$3=function(a){a||b("FBLogger")("FIXME").mustfix("onUpdateMetaData, VideoPlayerController is undefined.");if(a&&!this.$5){var c=a.getPlaybackDuration();this.props.setupVideoTimer(c,a)}this.props.isMuted?a&&a.mute():a&&a.unmute()}.bind(this),c}a.prototype.componentWillUnmount=function(){this.$1&&this.$1.release()};a.prototype.UNSAFE_componentWillUpdate=function(a){a.isPaused!==this.props.isPaused&&(a.isPaused?this.$2&&this.$2.vpc.pause(b("VideoPlayerReason").USER):this.$2&&this.$2.vpc.play(b("VideoPlayerReason").USER)),a.isMuted!==this.props.isMuted&&(a.isMuted?this.$2&&this.$2.vpc.mute():this.$2&&this.$2.vpc.unmute()),this.$1&&a.videoID!==this.props.videoID&&(this.$1.release(),this.$1=null)};a.prototype.render=function(){if(!this.props.videoID)return null;var a=b("React").createElement(b("BlurredBackgroundImage.react"),{fallbackSrc:this.props.blurImageSource,height:this.props.height,src:this.props.imageSource,width:this.props.width}),c=b("React").createElement(b("XUISpinner.react"),{background:"dark",className:"_2out",size:"large"}),d=b("React").createElement(b("VideoDataContainer.react"),{renderLoading:function(){return c},videoID:this.props.videoID},b("React").createElement(b("VideoPlayer.react"),{autoplay:this.props.isLiveMedia,className:"_1s5n"+(this.props.isLiveMedia?" _3r0u":""),onUpdateMetadata:this.$3,playerOrigin:b("FBStoriesVideoHelper").getVideoPlayerOrigins(this.props.cameraPostType),ref:function(a){this.$2=a,this.$4(a)}.bind(this),subOrigin:b("VideoPlayerLoggerSource").CAMERA_POST,videoData:b("VideoDataContainer.react").VIDEO_DATA_PLACEHOLDER},!this.props.isLiveMedia&&b("React").createElement(b("VideoComponentAutoPlayControl.react"),null),b("React").createElement(b("VideoComponentWithLiveBroadcast.react"),null),b("React").createElement(b("VideoComponentLiveAudioAnimation.react"),null),b("React").createElement(b("VideoComponentLiveEndScreen.react"),null),b("React").createElement(b("VideoComponentLiveVideoIndicator.react"),null),b("React").createElement(b("VideoComponentLiveInterruptedScreen.react"),null),b("React").createElement(b("VideoComponentStreamingReactionTray.react"),null),b("React").createElement(b("VideoComponentWithInstreamVideo.react"),null),b("React").createElement(b("VideoComponentWithCommercialBreak.react"),null),b("React").createElement(b("VideoComponentCommercialBreakVideoAdOverlay.react"),null),b("React").createElement(b("VideoComponentCommercialBreakLiveTransitionOverlay.react"),null)));return b("React").createElement("div",{className:"_ide",onMouseDown:this.props.onMouseDown,onMouseUp:this.props.onMouseUp,ref:this.props.mediaDivRef},a,d,(this.state.showLoadingSpinner||this.props.showLoadingSpinner)&&c)};a.prototype.$4=function(a){__p&&__p();if(this.$1||!a)return;var c=a.vpc;this.$1=new(b("SubscriptionsHandler"))();this.$1.addSubscriptions(c.addListener("commercialBreak/hideUFI",function(){return b("FBStoriesActions").setIsCommercialBreakRunning(c.getVideoID(),!0)}),c.addListener("commercialBreak/showUFI",function(){return b("FBStoriesActions").setIsCommercialBreakRunning(c.getVideoID(),!1)}),c.addListener("turnOffAutoplay",function(a){a=(a=a)!=null?a.reason:a;if(a!=="manually_paused")return;this.props.onVideoPaused&&this.props.onVideoPaused()}.bind(this)),c.addListener("bufferingChanged",function(){this.setState({showLoadingSpinner:c.isBuffering()})}.bind(this)),c.addListener("pendingPlayRequestChanged",function(){this.setState({showLoadingSpinner:c.isPlayRequestPending()})}.bind(this)),c.getVideoAPI().addListener("qualityChange",function(){c.getState()!==b("VideoPlayerStates").PLAYING&&c.play(new(b("VideoPlayerReasonTransitionHelper"))(b("VideoPlayerReason").AUTOPLAY))}));this.props.isLiveMedia&&b("EventListener").listen(c.getRootNode(),"contextmenu",function(event){event.preventDefault()})};a.defaultProps={blurImageSource:undefined,cameraPostType:b("CameraPostTypes").STORY,height:0,imageSource:undefined,isLiveMedia:!1,isMuted:!1,isPaused:!1,mediaDivRef:b("emptyFunction"),onMouseDown:b("emptyFunction"),onMouseUp:b("emptyFunction"),onVideoPaused:b("emptyFunction"),setupVideoTimer:b("emptyFunction"),showLoadingSpinner:!1,videoID:"",width:0};e.exports=a}),null);