if (self.CavalryLogger) { CavalryLogger.start_js(["RUtnd"]); }

__d("MessengerQuickCamButtonHTML5.react",["cx","fbt","AutoFocusableLink.react","BootloadedComponent.react","ChatConfig","JSResource","MessagingShowNUX.react","MessengerDialog.react","MessengerQuickCamActions","MessengerQuickCamOrigins","MessengerSpinner.react","React","XUIDialog.react","XUISpinner.react","joinClasses"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;c=b("React").PropTypes;var j="seen_cam_button_nux";d=babelHelpers.inherits(a,b("React").PureComponent);i=d&&d.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=i.constructor).call.apply(a,[this].concat(e)),this.state={dialogOpen:!!this.props.clicked,nuxShown:!!b("ChatConfig").get(j),nuxOpen:!1},this.$3=function(){this.setState({nuxOpen:!1,nuxShown:!0,dialogOpen:!0})}.bind(this),this.$6=function(){this.state.dialogOpen&&this.setState({dialogOpen:!1})}.bind(this),this.$7=function(a){!a?this.$6():b("MessengerQuickCamActions").requestUserMedia(this.props.viewer,this.props.threadID)}.bind(this),this.$1=function(a){if(!this.state.nuxShown){this.setState({nuxOpen:!0});return}if(this.state.dialogOpen)return;a.stopPropagation();this.setState({dialogOpen:!this.state.dialogOpen})}.bind(this),c}a.prototype.render=function(){var a=this.props.textChild;return b("React").createElement(b("AutoFocusableLink.react"),{autoFocus:this.props.autoFocus,className:b("joinClasses")(this.props.className,"_30yy"),onClick:this.$1,ref:"photoButton",role:"button",title:h._("Take a picture using quick cam"),tabIndex:0},!!a&&a,this.$2())};a.prototype.$2=function(){if(!this.state.nuxShown)return b("React").createElement(b("MessagingShowNUX.react"),{contextRef:function(){return this.refs.photoButton}.bind(this),settingName:j,shown:this.state.nuxOpen,onHidden:this.$3,ref:"camNUX"},h._("Send photos and videos from your computer's camera."));return!this.state.dialogOpen?null:this.props.location===b("MessengerQuickCamOrigins").MESSENGER?this.$4():this.$5()};a.prototype.$4=function(){var a=window.innerWidth/3;return b("React").createElement(b("MessengerDialog.react"),{overflow:"hidden",contextRef:function(){return this.refs.photoButton}.bind(this),shown:this.state.dialogOpen,onBlur:this.$6,onToggle:this.$7,width:400>a?400:a},b("React").createElement(b("BootloadedComponent.react"),{bootloadPlaceholder:b("React").createElement("div",{style:{padding:"30px",textAlign:"center"}},b("React").createElement(b("MessengerSpinner.react"),null)),bootloadLoader:b("JSResource")("MessengerQuickCamDialog.react").__setRef("MessengerQuickCamButtonHTML5.react"),location:this.props.location,onShown:function(a){this.$7(!0),this.props.onDialogShown&&this.props.onDialogShown(a)}.bind(this),onHidden:this.$6,onEscKeyDown:this.$6,shown:this.state.dialogOpen,threadID:this.props.threadID,viewer:this.props.viewer}))};a.prototype.$5=function(){var a=window.innerWidth/3;return b("React").createElement(b("XUIDialog.react"),{overflow:"hidden",contextRef:function(){return this.refs.photoButton}.bind(this),shown:this.state.dialogOpen,onBlur:this.$6,hideOnEscape:!0,onToggle:this.$7,width:400>a?400:a},b("React").createElement(b("BootloadedComponent.react"),{bootloadPlaceholder:b("React").createElement("div",{style:{padding:"30px",textAlign:"center"}},b("React").createElement(b("XUISpinner.react"),null)),bootloadLoader:b("JSResource")("MessengerQuickCamDialog.react").__setRef("MessengerQuickCamButtonHTML5.react"),location:this.props.location,onShown:function(a){this.$7(!0),this.props.onDialogShown&&this.props.onDialogShown(a)}.bind(this),onHidden:this.$6,onEscKeyDown:this.$6,onSendButtonClick:this.props.onSendButtonClick,shown:this.state.dialogOpen,threadID:this.props.threadID,viewer:this.props.viewer}))};a.propTypes={autoFocus:c.bool,className:c.string.isRequired,clicked:c.bool,location:c.oneOf(b("MessengerQuickCamOrigins").getValues()).isRequired,onSendButtonClick:c.func,textChild:c.node,threadID:c.string.isRequired,viewer:c.string.isRequired};e.exports=a}),null);