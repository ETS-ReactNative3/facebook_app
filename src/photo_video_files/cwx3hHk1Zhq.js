if (self.CavalryLogger) { CavalryLogger.start_js(["2\/wO0"]); }

__d("NewsFeedTailloadPlaceholderTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(){this.clear()}a.prototype.log=function(){b("GeneratedLoggerUtils").log("logger:NewsFeedTailloadPlaceholderLoggerConfig",this.$1,b("Banzai").BASIC)};a.prototype.logVital=function(){b("GeneratedLoggerUtils").log("logger:NewsFeedTailloadPlaceholderLoggerConfig",this.$1,b("Banzai").VITAL)};a.prototype.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:NewsFeedTailloadPlaceholderLoggerConfig",this.$1,{signal:!0})};a.prototype.clear=function(){this.$1={};return this};a.prototype.getData=function(){return babelHelpers["extends"]({},this.$1)};a.prototype.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};a.prototype.setDisplayDone=function(a){this.$1.display_done=a;return this};a.prototype.setTailLoadPosition=function(a){this.$1.tail_load_position=a;return this};a.prototype.setTailLoadStatus=function(a){this.$1.tail_load_status=a;return this};a.prototype.setVC=function(a){this.$1.vc=a;return this};a.prototype.setVisibleDuration=function(a){this.$1.visible_duration=a;return this};c={display_done:!0,tail_load_position:!0,tail_load_status:!0,vc:!0,visible_duration:!0};e.exports=a}),null);
__d("FeedConsumptionEvents",["keyMirror"],(function(a,b,c,d,e,f){"use strict";a=Object.freeze(b("keyMirror")({PLACEHOLDER_HIDDEN:null,PLACEHOLDER_VISIBLE:null,REQUEST_CANCELLED:null,REQUEST_COMPLETE:null,REQUEST_ERROR:null,REQUEST_STARTED:null,STORY_DISPLAY:null}));e.exports=a}),null);
__d("FeedConsumptionController",["EventEmitter","FeedConsumptionEvents","IntersectionObserver","PageletEventConstsJS","PageletEventsHelper"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){this.$3=null,this.$4=null,this.$6=0,this.$2=a,this.$1=new(b("EventEmitter"))()}a.prototype.setPlaceholder=function(a){!this.$3?this.$3=new(b("IntersectionObserver"))(function(a){return this.$7(a)}.bind(this),{threshold:.1}):this.$5&&this.$3.unobserve(this.$5),this.$5=a,this.$3.observe(a)};a.prototype.start=function(){this.$6=0,this.$4||(this.$4=b("PageletEventsHelper").subscribeToPageletEvents(function(a,c){c===b("PageletEventConstsJS").DISPLAY_END&&a.startsWith("hyperfeed_story")&&this.$1.emit(b("FeedConsumptionEvents").STORY_DISPLAY,this.$6++)}.bind(this))),this.$1.emit(b("FeedConsumptionEvents").REQUEST_STARTED)};a.prototype.complete=function(){this.$1.emit(b("FeedConsumptionEvents").REQUEST_COMPLETE)};a.prototype.error=function(){this.$1.emit(b("FeedConsumptionEvents").REQUEST_ERROR)};a.prototype.cancel=function(){this.$1.emit(b("FeedConsumptionEvents").REQUEST_CANCELLED)};a.prototype.destroy=function(){this.$3&&this.$3.disconnect(),this.$3=null,this.$4&&this.$4.remove(),this.$4=null};a.prototype.addListener=function(a,b){return this.$1.addListener(a,b)};a.prototype.once=function(a,b){return this.$1.once(a,b)};a.prototype.$7=function(a){var c=this.$5,d=this.$3&&this.$3.thresholds,e=Array.isArray(d)&&d[0]||0;a.forEach(function(a){a.target===c&&this.$1.emit(a.intersectionRatio>e?b("FeedConsumptionEvents").PLACEHOLDER_VISIBLE:b("FeedConsumptionEvents").PLACEHOLDER_HIDDEN,this.$2())}.bind(this))};e.exports=a}),null);
__d("FeedConsumptionRestorationLogger",["FeedConsumptionEvents","FeedQuickLogModule","QuickPerformanceLogger","SubscriptionsHandler"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){this.$2=0,this.$1=a}a.prototype.destroy=function(){this.$3&&this.$3.release(),this.$4&&this.$4.remove()};a.prototype.$5=function(a){b("QuickPerformanceLogger").markerEnd(b("FeedQuickLogModule").CONSUMPTION_RESTORATION_WWW,a),this.reset()};a.prototype.reset=function(){this.destroy(),this.$2=0,this.$4=this.$1.once(b("FeedConsumptionEvents").PLACEHOLDER_VISIBLE,function(a){b("QuickPerformanceLogger").markerStart(b("FeedQuickLogModule").CONSUMPTION_RESTORATION_WWW),b("QuickPerformanceLogger").annotateMarkerInt(b("FeedQuickLogModule").CONSUMPTION_RESTORATION_WWW,"STORY_POSITION",a),this.$3=new(b("SubscriptionsHandler"))(),this.$3.addSubscriptions(this.$1.once(b("FeedConsumptionEvents").STORY_DISPLAY,function(a){b("QuickPerformanceLogger").annotateMarkerInt(b("FeedQuickLogModule").CONSUMPTION_RESTORATION_WWW,"TAIL_LOAD_STORY_POSITION",a),this.$5("SUCCESS")}.bind(this)),this.$1.once(b("FeedConsumptionEvents").PLACEHOLDER_HIDDEN,function(){return this.$5("CANCEL")}.bind(this)),this.$1.once(b("FeedConsumptionEvents").REQUEST_CANCELLED,function(){return this.$5("CANCEL")}.bind(this)),this.$1.once(b("FeedConsumptionEvents").REQUEST_ERROR,function(){return this.$5("FAIL")}.bind(this)))}.bind(this))};e.exports=a}),null);
__d("NewsFeedDedupeStoryController",["CSS","DOMQuery","queryThenMutateDOM"],(function(a,b,c,d,e,f){__p&&__p();a={dedupe:function(a,c){__p&&__p();b("queryThenMutateDOM")(function(){var d={};return b("DOMQuery").scry(a,c).filter(function(a){var c=a.getAttribute("data-dedupekey");if(c&&b("CSS").shown(a)){if(d[c])return!0;d[c]=!0}return!1})},function(a){a.forEach(function(a){b("CSS").hide(a),a.removeAttribute("style")})},"NewsFeedDedupeStoryControllerDedupe")}};e.exports=a}),null);
__d("NewsFeedOffscreenController",["cx","Arbiter","CSS","DOMQuery","IntersectionObserver","LitestandShareAttachment","NavigationMessage","Run","Style","SubscriptionsHandler","debounce","getOrCreateDOMID","intersectionObserverEntryIsIntersecting","queryThenMutateDOM"],(function(a,b,c,d,e,f,g){__p&&__p();a=400;var h=10,i="_5qqr",j={},k=null,l={rootMargin:a+"px 0px "+a+"px 0px"},m=null,n={};function o(){for(var a in n)b("DOMQuery").scry(n[a],"div[data-fullscreen]").length?delete n[a]:j[a]=n[a].offsetHeight}function p(){var a;for(var c in n)a=j[c],a!==undefined&&a>0&&(b("Style").apply(n[c],{height:a+"px",marginBottom:h+"px"}),a=n[c].firstElementChild,a&&b("CSS").hide(a),delete j[c]),delete n[c]}var q=b("debounce")(function(){b("queryThenMutateDOM")(o,p,"NewsFeedOffscreenController")});function r(a){delete n[b("getOrCreateDOMID")(a)];b("Style").apply(a,{height:"",marginBottom:""});a=a.firstElementChild;if(a){b("CSS").show(a);a=b("DOMQuery").scry(a,"."+i);a.forEach(function(a){b("LitestandShareAttachment").init(a)})}}function s(a){var c=[];a.forEach(function(a){b("intersectionObserverEntryIsIntersecting")(a)?c.push(a.target):n[b("getOrCreateDOMID")(a.target)]=a.target});q();c.forEach(r)}function t(){k&&k.disconnect(),k=null,m&&m.release(),m=null}function u(){if(k)return k;k=new(b("IntersectionObserver"))(s,l);var a=new(b("SubscriptionsHandler"))();a.addSubscriptions(b("Arbiter").subscribe(b("NavigationMessage").NAVIGATION_BEGIN,t),b("Run").onLeave(t));return k}c={attachSubstream:function(a){u().observe(a)}};e.exports=c}),null);
__d("NewsFeedTailLoadPlaceholderLogger",["DOM","LitestandStream","NewsFeedTailloadPlaceholderTypedLogger","TailLoadLogger"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;c=babelHelpers.inherits(a,b("TailLoadLogger"));g=c&&c.prototype;function a(a,b){g.constructor.call(this,"feed",a,b)}a.prototype.createLogger=function(){return new(b("NewsFeedTailloadPlaceholderTypedLogger"))()};a.prototype.getStoryCount=function(){return b("DOM").scry(b("LitestandStream").getStreamRoot(),b("LitestandStream").getStoriesSelector()).length};e.exports=a}),null);
__d("NewsFeedTailLoadControllerLegacy",["Arbiter","Bootloader","CSS","DOM","Event","FeedConsumptionController","FeedConsumptionRestorationLogger","FunnelLogger","LitestandMessages","LitestandStream","LitestandStreamTailStoryPlaceholderVisibilityTracker","MainThreadPerformanceLoggerActions","MainThreadPerformanceMonitor","NavigationMessage","NewsFeedDedupeStoryController","NewsFeedOffscreenController","NewsFeedTailLoadPlaceholderLogger","Run","SubscriptionsHandler","ge","getOrCreateDOMID","gkx","intersectionObserverEntryIsIntersecting","observeIntersection"],(function(a,b,c,d,e,f){__p&&__p();var g=3e4,h={"streamload.tail.commence":!0,"streamload.tail.success":!0,"streamload_error.tail":!0,"streamload_error.tail.transport":!0,"streamload_error.tail.final":!0,"streamload.tail.retry":!0,"streamload_error.tail.retry":!0,"streamload.tail.retry.success":!0,"streamload_timeout.tail":!0},i,j,k={},l=null,m="WWW_NEWSFEED_TAILLOAD_FUNNEL";a=b("gkx")("AT7KK82E6JxaPx6oN4q-Vm9lp3uNcTVJR1JkFm9kz7Exm8LU2NQ95JrEznfGXvNo3sy8c5nRChJELHsdh7syPA88o6lc41pGHRPG_OgO5q8hBw");var n=2,o=null,p=null,q,r=null,s,t=null,u=null,v=0,w=0,x=null,y=new(b("FeedConsumptionController"))(function(){return b("DOM").scry(b("LitestandStream").getStreamRoot(),b("LitestandStream").getStoriesSelector()).length});a&&(l=new(b("FeedConsumptionRestorationLogger"))(y));var z=function(a){a.forEach(function(a){h[a]&&b("FunnelLogger").appendActionWithTag(m,w,a,"try_"+v)}),b("Bootloader").loadModules(["BanzaiODS"],function(b){a.forEach(function(a){b.bumpEntityKey("feed_load",a)})},"NewsFeedTailLoadControllerLegacy")},A=function(a,c){b("Arbiter").inform(b("LitestandMessages").STREAM_LOAD_ERROR,c);c=["streamload_error.tail"];v>0&&c.push("streamload_error.tail.retry");a&&v<n?(v++,D(a),c.push("streamload.tail.retry"),b("Arbiter").inform(b("LitestandMessages").STREAM_LOAD_RETRY)):(u&&b("CSS").removeClass(u,"async_saving"),p&&p.tailLoadFailed(),y.error(),b("MainThreadPerformanceMonitor").stop(b("MainThreadPerformanceLoggerActions").TAIL_LOAD));z(c)},B=function(){C(),q=setTimeout(function(){z(["streamload_timeout.tail"])},g)},C=function(){q&&clearTimeout(q)},D=function(a){__p&&__p();v<1&&(b("FunnelLogger").startFunnel(m,w),b("FunnelLogger").addFunnelTag(m,w,"NewsFeedTailLoadController"));z(["streamload.tail.commence"]);k[a]&&(z(["duplicate_cursor"]),b("Arbiter").inform(b("LitestandMessages").DUPLICATE_CURSOR_ERROR,a));k[a]=!0;var c={client_stories_count:b("DOM").scry(b("LitestandStream").getStreamRoot(),b("LitestandStream").getStoriesSelector()).length,cursor:a,feed_stream_id:b("LitestandStream").getFeedStreamID(),pager_config:s,scroll_count:w+1,story_id:b("LitestandStream").getStoryID()},d=function(b){A(a,b)},e=function(b){z(["streamload_error.tail.transport"]),A(a,b)},f=function(a){a.error?z(["streamload_error.tail.final"]):(z(["streamload.tail.success"]),w++)};!r?b("Bootloader").loadModules(["UIPagelet"],function(a){r=a.loadFromEndpoint("LitestandTailLoadPagelet",b("getOrCreateDOMID")(i),c,{append:!0,automatic:!0,constHeight:!0,crossPage:!0,errorHandler:d,finallyHandler:f,transportErrorHandler:e,usePipe:!0}),b("Arbiter").inform(b("LitestandMessages").STORIES_REQUESTED)},"NewsFeedTailLoadControllerLegacy"):(r.setErrorHandler(d).setTransportErrorHandler(e).go(c),b("Arbiter").inform(b("LitestandMessages").STORIES_REQUESTED))};function E(){x&&x.release(),x=null,p&&p.tailLoadCancelled(),p&&p.destroy(),p=null,y.cancel(),y.destroy(),l&&l.destroy(),k={},r=null,w=0,C()}function F(){u&&b("CSS").addClass(u,"async_saving"),D(j),y.start(),p&&p.tailLoadStarted(),b("MainThreadPerformanceMonitor").start(b("MainThreadPerformanceLoggerActions").TAIL_LOAD)}function G(event){F(),event.preventDefault()}function H(a){o&&o.remove();o=b("observeIntersection")(a,function(a){a=b("intersectionObserverEntryIsIntersecting")(a);a&&(F(),o&&(o.remove(),o=null))},{rootMargin:"0px 0px "+((a=(a=t)==null?void 0:a.bufferPixels)!=null?a:0)+"px 0px"});return o}c={init:function(a,c,d,e,f,g){i=d,j=a,u=c,s=e,t=f,x=new(b("SubscriptionsHandler"))(),b("LitestandStreamTailStoryPlaceholderVisibilityTracker").setPlaceholderElement(u),x.addSubscriptions(H(u),b("Arbiter").subscribe(b("LitestandMessages").STORIES_REQUESTED,B),b("Arbiter").subscribe([b("LitestandMessages").STORIES_INSERTED,b("LitestandMessages").STREAM_LOAD_ERROR],C),b("Arbiter").subscribe(b("NavigationMessage").NAVIGATION_BEGIN,E),b("Event").listen(u,"click",G),b("Run").onLeave(E),b("Run").onUnload(function(){return p&&p.tailLoadCancelled()})),y.setPlaceholder(u),l&&l.reset(),g!=null&&(p=new(b("NewsFeedTailLoadPlaceholderLogger"))(g,u))},destroy:function(){E(),u&&b("CSS").hide(u)},tailloadCompleted:function(a,c){var d=b("LitestandStream").getStreamRoot();d&&b("NewsFeedDedupeStoryController").dedupe(d,b("LitestandStream").getStoriesSelector());u&&b("CSS").removeClass(u,"async_saving");j=a;u&&H(u);v=0;p&&p.tailLoadSuccessful(c);y.complete();b("MainThreadPerformanceMonitor").stop(b("MainThreadPerformanceLoggerActions").TAIL_LOAD)},setPagerConfig:function(a){s=a},moreStoriesInserted:function(a){b("Arbiter").inform(b("LitestandMessages").STORIES_INSERTED,{substream_id:a});a=b("ge")(a);a&&(b("NewsFeedOffscreenController").attachSubstream(a),v>0&&(v=0,z(["streamload.tail.retry.success"])))},handleErrorV2:function(a){A(a)}};e.exports=c}),null);