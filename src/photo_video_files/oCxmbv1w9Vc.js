if (self.CavalryLogger) { CavalryLogger.start_js(["hmHLh"]); }

__d("IntegrityContextTriggerLoggerManager",["Event","IntegrityContextTriggerClientTypedLogger","OnVisible","Run","SubscriptionsHandler"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g={},h=Object.freeze({TRIGGER_VPV:"trigger_vpv",TRIGGER_HOVER:"trigger_hover",TRIGGER_CLICK:"trigger_click"});function i(a,c,d){__p&&__p();var e=a.triggerLinkElem,f=a.loggerID,g=a.serializedFTMsg,h=a.integrityContextType;a=a.entryPoint;this.$1=e;this.$2=f;this.$3=g;this.$4=h;this.$6=null;this.$5=a;this.$7=c;e=this.destroy.bind(this);f=new(b("SubscriptionsHandler"))();f.addSubscriptions(b("Run").onLeave(e),b("Run").onUnload(e));d||this.$9(f);this.$8=f}i.prototype.$10=function(){var a=new(b("SubscriptionsHandler"))();a.addSubscriptions(new(b("OnVisible"))(this.$1,function(){a.release(),this.onFirstVisible()}.bind(this),!0,0));return a};i.prototype.$11=function(){var a=new(b("SubscriptionsHandler"))();a.addSubscriptions(b("Event").listen(this.$1,"mouseenter",function(){a.release(),this.onFirstMouseEnter()}.bind(this)));return a};i.prototype.$9=function(a){var c=this.$10(),d=this.$11();a.addSubscriptions(b("Event").listen(this.$1,"click",function(){this.onClick()}.bind(this)),{remove:function(){c.release(),d.release()}})};i.prototype.destroy=function(){this.$8.release(),delete g[this.$2]};i.prototype.onClick=function(){this.$6=new Date().valueOf(),this.$12(h.TRIGGER_CLICK)};i.prototype.onFirstMouseEnter=function(){this.$12(h.TRIGGER_HOVER)};i.prototype.onFirstVisible=function(){this.$12(h.TRIGGER_VPV)};i.prototype.getLastTriggerTimeMS=function(){return this.$6};i.prototype.$12=function(event){var a=new(b("IntegrityContextTriggerClientTypedLogger"))().setEvent(event).setTriggerLoggerID(this.$2).setIntegrityContextType(this.$4).setEntryPoint(this.$5);this.$3&&a.setFeedTracking(this.$3);var c=this.$7&&this.$7();c&&a.updateExtraData(c);a.log()};function j(a){return g[a]||null}function k(a){a=j(a);a&&a.destroy()}function l(a,b,c){var d=a.loggerID;k(d);a=new i(a,b,c);g[d]=a;return a}function a(a,b){b===void 0&&(b=null);return l(a,b,!1)}function c(a){return l(a,null,!0)}function d(a){a=j(a);return a&&a.getLastTriggerTimeMS()||null}e.exports={initLogger:a,initLoggerWithCustomEventListeners:c,clearLogger:k,getLastTriggerTimeMS:d}}),null);