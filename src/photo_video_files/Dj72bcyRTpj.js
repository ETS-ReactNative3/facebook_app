if (self.CavalryLogger) { CavalryLogger.start_js(["PC6tk"]); }

__d("LiveVideoBroadcastPreviewBody.react",["cx","AsyncRequest","CenteredContainer.react","LiveAPIPreviewPlayerBottomHelpText.react","LiveAPIPreviewPlayerTopHelpText.react","LiveAPIStreamInputSelector.react","LiveVideoResilientAPIPlayer.react","React","XLiveVideoBroadcastActiveStreamController"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i=2e3;c=babelHelpers.inherits(a,b("React").Component);h=c&&c.prototype;function a(){var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=h.constructor).call.apply(a,[this].concat(d)),this.state={streamPollerID:null,isStreamActive:!1},b}a.prototype.componentDidMount=function(){this.$1()};a.prototype.componentWillUnmount=function(){this.state.streamPollerID&&clearInterval(this.state.streamPollerID)};a.prototype.render=function(){var a=this.props,c=a.videoID;a=babelHelpers.objectWithoutProperties(a,["videoID"]);a=this.state.isStreamActive?null:b("React").createElement("div",{className:"_3-8j"},b("React").createElement(b("LiveAPIPreviewPlayerTopHelpText.react"),null),b("React").createElement(b("LiveAPIStreamInputSelector.react"),a),b("React").createElement(b("LiveAPIPreviewPlayerBottomHelpText.react"),null));c=this.state.isStreamActive?b("React").createElement(b("LiveVideoResilientAPIPlayer.react"),{videoID:c}):null;return b("React").createElement(b("CenteredContainer.react"),{className:"_2clz _h6n",vertical:!0},b("React").createElement("div",{className:"_2clx"},b("React").createElement("div",{className:"_37bq"},a),c))};a.prototype.$1=function(){if(!this.props.broadcastID||this.props.broadcastID===undefined)return;if(this.state.streamPollerID)return;this.$2()};a.prototype.$2=function(){var a=setInterval(function(){var a=b("XLiveVideoBroadcastActiveStreamController").getURIBuilder().setFBID("broadcast_id",String(this.props.broadcastID)).getRequest(new(b("AsyncRequest"))());a.setPayloadHandler(function(a){if(a.inputStreams.length===0)return;a=a.inputStreams[0].isActive;this.setState({isStreamActive:a})}.bind(this)).send()}.bind(this),i);this.setState({streamPollerID:a})};e.exports=a}),null);