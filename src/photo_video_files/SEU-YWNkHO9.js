if (self.CavalryLogger) { CavalryLogger.start_js(["L2ZYw"]); }

__d("ReactComposerLiveBroadcastStreamKeyFields.react",["ix","cx","fbt","CreateBroadcastEvent","CreateLiveBroadcastUIWaterfallTypedLogger","FBClipboardLink.react","GraphAPI","Image.react","LeftRight.react","LiveVideoBroadcastAPIActions","LiveVideoBroadcastUtils","PersistentStreamKeyStatus","PublishingToolsWebdriverTestDataIDs","React","SimpleNUXMessage","SimpleNUXMessageTypes","Tooltip.react","XUIAmbientNUX.react","XUIButton.react","XUICheckboxInput.react","XUISpinner.react","XUIText.react","XUITextInput.react","fbglyph","gkx","promiseDone"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j;c=babelHelpers.inherits(a,b("React").Component);j=c&&c.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=j.constructor).call.apply(a,[this].concat(e)),this.state={useSSL:!1,loadingPersistentStreamURL:!1,persistentStreamURL:undefined,backupPersistentStreamURL:undefined,checkboxNuxShown:!b("SimpleNUXMessage").hasUserSeenMessage(b("SimpleNUXMessageTypes").LIVE_VIDEO_PERSISTENT_STREAM_KEY),resetNuxShown:!b("SimpleNUXMessage").hasUserSeenMessage(b("SimpleNUXMessageTypes").LIVE_VIDEO_RESET_PERSISTENT_STREAM_KEY),isPersistentStreamKeyChecked:!1,isBackupStreamChecked:!1},this.$1=function(){var a=this.props,c=a.accessToken,d=a.broadcastID;if(!d||!c)return;this.setState(function(a,b){return{isBackupStreamChecked:!a.isBackupStreamChecked}});this.state.isPersistentStreamKeyChecked&&!this.state.backupPersistentStreamURL?b("promiseDone")(b("LiveVideoBroadcastUtils").createInputStream(c,d),function(a){b("LiveVideoBroadcastAPIActions").updateBackupInputStream(a.stream_url,a.secure_stream_url),this.$2(d,c)}.bind(this),function(a){this.setState({isBackupStreamChecked:!1})}.bind(this)):this.props.streamURLs.backupStreamURL||b("LiveVideoBroadcastAPIActions").addInputStream()}.bind(this),this.$16=function(event){this.setState({useSSL:event.target.checked})}.bind(this),this.$19=function(){if(this.props.broadcastID===undefined||this.props.accessToken===undefined)return;this.state.isPersistentStreamKeyChecked?(this.$20(this.props.broadcastID,this.props.accessToken),this.setState({isPersistentStreamKeyChecked:!1})):(this.$4(this.props.broadcastID,this.props.accessToken),this.setState({isPersistentStreamKeyChecked:!0}))}.bind(this),this.$9=function(){if(this.props.broadcastID===undefined||this.props.accessToken===undefined)return;this.$2(this.props.broadcastID,this.props.accessToken)}.bind(this),c}a.prototype.$3=function(a){if(!a)return null;a=a.match(/(^.*rtmp\/)(.*)$/);return a?{baseURL:a[1],streamKey:a[2]}:null};a.prototype.componentDidMount=function(){this.props.isPersistentStreamKeyOptionShown&&this.props.usePersistenStreamKeyByDefault&&this.props.broadcastID&&this.props.accessToken&&(this.$4(this.props.broadcastID,this.props.accessToken),this.setState({isPersistentStreamKeyChecked:!0}))};a.prototype.UNSAFE_componentWillReceiveProps=function(a){var b=a.broadcastID!==this.props.broadcastID||a.isPersistentStreamKeyOptionShown!==this.props.isPersistentStreamKeyOptionShown||a.usePersistenStreamKeyByDefault!==this.props.usePersistenStreamKeyByDefault;b&&(a.isPersistentStreamKeyOptionShown&&a.usePersistenStreamKeyByDefault&&a.broadcastID&&a.accessToken?(this.$4(a.broadcastID,a.accessToken),this.setState({isPersistentStreamKeyChecked:!0})):this.setState({isPersistentStreamKeyChecked:!1}))};a.prototype.render=function(){var a=this.$3(this.state.useSSL?this.props.streamURLs.primarySecureStreamURL:this.props.streamURLs.primaryStreamURL),c=this.$3(this.state.useSSL?this.props.streamURLs.backupSecureStreamURL:this.props.streamURLs.backupStreamURL);if(!a)return null;var d=b("React").createElement("div",{className:"_6th2"},b("React").createElement(b("XUITextInput.react"),{disabled:!0,height:"tall",placeholder:i._("Stream URL"),value:a.baseURL,ref:"url_field",onFocus:function(){return this.refs.url_field.getTextFieldDOM().select()}.bind(this)}),b("React").createElement(b("FBClipboardLink.react"),{value:a.baseURL,tooltip:i._("Copy URL to clipboard"),tooltipSuccess:i._("Copied!")},b("React").createElement(b("XUIButton.react"),{className:"_6tf7",label:i._("Copy")})));a=this.state.isPersistentStreamKeyChecked?this.$5():this.$6(a);return b("React").createElement("div",null,this.$7(),b("React").createElement(b("XUIText.react"),{className:"_3-8x _3-94",display:"block",size:"meta1",weight:"bold"},i._("Server URL"),b("React").createElement(b("Tooltip.react"),{position:"above",tooltip:i._("In your streaming software, this may be called URL or Address")},b("React").createElement(b("Image.react"),{className:"_52vx",src:g("142360")}))),d,a,this.$8(c))};a.prototype.$6=function(a){return b("React").createElement("div",null,b("React").createElement(b("XUIText.react"),{className:"_3-8y _3-94",display:"block",size:"meta1",weight:"bold"},i._("Stream Key"),b("React").createElement(b("Tooltip.react"),{position:"above",tooltip:i._("This stream key is valid for 7 days. Once you preview the video, you have up to 5 hours to go live.")},b("React").createElement(b("Image.react"),{className:"_52vx",src:g("142360")}))),b("React").createElement("div",{className:"_6th2"},b("React").createElement(b("XUITextInput.react"),{disabled:!0,"data-testid":b("PublishingToolsWebdriverTestDataIDs").STREAM_KEY_ON_PLAYER,height:"tall",placeholder:i._("Stream Key"),value:a.streamKey,ref:"stream_key_field",onFocus:function(){return this.refs.stream_key_field.getTextFieldDOM().select()}.bind(this)}),b("React").createElement(b("FBClipboardLink.react"),{value:a.streamKey,tooltip:i._("Copy key to clipboard"),tooltipSuccess:i._("Copied!")},b("React").createElement(b("XUIButton.react"),{className:"_6tf7",label:i._("Copy")}))))};a.prototype.$5=function(){if(this.state.loadingPersistentStreamURL||!this.state.persistentStreamURL)return b("React").createElement("div",{className:"_60i_"},b("React").createElement(b("XUISpinner.react"),{background:"light",size:"large"}));var a=this.$3(this.state.persistentStreamURL);return!a?null:b("React").createElement("div",null,b("React").createElement(b("XUIText.react"),{className:"_3-8y _3-94",display:"block",size:"meta1",weight:"bold"},i._("Persistent Stream Key"),b("React").createElement(b("Tooltip.react"),{position:"above",tooltip:i._("Don't share this with others unless you'd like them to always be able to broadcast to your Page.")},b("React").createElement(b("Image.react"),{className:"_52vx",src:g("142360")}))),b("React").createElement("div",{className:"_6tf8"},b("React").createElement("div",{className:"_6th2"},b("React").createElement(b("XUITextInput.react"),{disabled:!0,height:"tall",placeholder:i._("Persistent Stream Key"),value:a.streamKey,ref:"persistent_stream_key_field",onFocus:function(){return this.refs.persistent_stream_key_field.getTextFieldDOM().select()}.bind(this)}),b("React").createElement(b("FBClipboardLink.react"),{value:a.streamKey,tooltip:i._("Copy key to clipboard"),tooltipSuccess:i._("Copied!")},b("React").createElement(b("XUIButton.react"),{className:"_6tf7",label:i._("Copy")}))),b("React").createElement(b("XUIButton.react"),{className:"_6tf9",ref:"resetPersistentStreamKey",label:i._("Reset"),size:"large",onClick:this.$9})),this.$10())};a.prototype.$11=function(){b("SimpleNUXMessage").markMessageSeenByUser(b("SimpleNUXMessageTypes").LIVE_VIDEO_PERSISTENT_STREAM_KEY),this.setState({checkboxNuxShown:!1})};a.prototype.$12=function(){return!this.state.checkboxNuxShown?null:b("React").createElement(b("XUIAmbientNUX.react"),{contextRef:function(){return this.refs.persistentCheckBox}.bind(this),hideOnBlur:!0,shown:this.state.checkboxNuxShown,onBeforeHide:function(){return this.$11()}.bind(this),onCloseButtonClick:function(){return this.$11()}.bind(this)},i._("You can now reuse the same stream key over multiple live broadcasts."))};a.prototype.$13=function(){return!this.state.checkboxNuxShown?null:b("React").createElement(b("XUIAmbientNUX.react"),{contextRef:function(){return this.refs.backupCheckBox}.bind(this),hideOnBlur:!0,shown:this.state.checkboxNuxShown,onBeforeHide:function(){return this.$11()}.bind(this),onCloseButtonClick:function(){return this.$11()}.bind(this)},i._("You now have a backup stream."))};a.prototype.$10=function(){return!this.state.resetNuxShown?null:b("React").createElement(b("XUIAmbientNUX.react"),{contextRef:function(){return this.refs.resetPersistentStreamKey}.bind(this),hideOnBlur:!0,shown:this.state.resetNuxShown,onCloseButtonClick:function(){b("SimpleNUXMessage").markMessageSeenByUser(b("SimpleNUXMessageTypes").LIVE_VIDEO_RESET_PERSISTENT_STREAM_KEY),this.setState({resetNuxShown:!1})}.bind(this)},i._("Reset your persistent stream key if you ever want to replace it with a new one."))};a.prototype.$8=function(a){if(!this.state.isBackupStreamChecked)return null;return this.props.isPersistentStreamKeyOptionShown&&this.state.persistentStreamURL?this.$14():this.$15(a)};a.prototype.$15=function(a){return!a?b("React").createElement("div",{className:"_60i_"},b("React").createElement(b("XUISpinner.react"),{background:"light",size:"large"})):b("React").createElement("div",null,b("React").createElement(b("XUIText.react"),{className:"_3-8x _3-94",display:"block",size:"meta1",weight:"bold"},i._("Backup Stream Key"),b("React").createElement(b("Tooltip.react"),{position:"above",tooltip:i._("This backup stream key is valid for 7 days. Once you preview the video, you have up to 5 hours to go live.")},b("React").createElement(b("Image.react"),{className:"_52vx",src:g("142360")}))),b("React").createElement("div",{className:"_6th2"},b("React").createElement(b("XUITextInput.react"),{disabled:!0,height:"tall",placeholder:i._("Stream URL"),value:a.streamKey,ref:"backup_stream_key_field",onFocus:function(){return this.refs.backup_stream_key_field.getTextFieldDOM().select()}.bind(this)}),b("React").createElement(b("FBClipboardLink.react"),{value:a.streamKey,tooltip:i._("Copy key to clipboard"),tooltipSuccess:i._("Copied!")},b("React").createElement(b("XUIButton.react"),{className:"_6tf7",label:i._("Copy")}))))};a.prototype.$14=function(){if(!this.state.backupPersistentStreamURL)return b("React").createElement("div",{className:"_60i_"},b("React").createElement(b("XUISpinner.react"),{background:"light",size:"large"}));var a=this.$3(this.state.backupPersistentStreamURL);return!a?null:b("React").createElement("div",null,b("React").createElement(b("XUIText.react"),{className:"_3-8y _3-94",display:"block",size:"meta1",weight:"bold"},i._("Backup Persistent Stream Key"),b("React").createElement(b("Tooltip.react"),{position:"above",tooltip:i._("Don't share this with others unless you'd like them to always be able to broadcast to your Page.")},b("React").createElement(b("Image.react"),{className:"_52vx",src:g("142360")}))),b("React").createElement("div",{className:"_6th2"},b("React").createElement(b("XUITextInput.react"),{disabled:!0,height:"tall",placeholder:i._("Backup Persistent Stream Key"),value:a.streamKey,ref:"backup_persistent_stream_key_field",onFocus:function(){return this.refs.backup_persistent_stream_key_field.getTextFieldDOM().select()}.bind(this)}),b("React").createElement(b("FBClipboardLink.react"),{value:a.streamKey,tooltip:i._("Copy key to clipboard"),tooltipSuccess:i._("Copied!")},b("React").createElement(b("XUIButton.react"),{className:"_6tf7",label:i._("Copy")}))))};a.prototype.$7=function(){return b("React").createElement(b("LeftRight.react"),{className:"_3-8x",direction:"left"},b("React").createElement(b("XUICheckboxInput.react"),{onChange:this.$16}),b("React").createElement("div",null,b("React").createElement(b("XUIText.react"),{className:"_3-99 _3-94",size:"meta1"},i._("Use a secure connection (SSL)")),b("React").createElement(b("Tooltip.react"),{position:"above",tooltip:i._("A secure connection is recommended. Some live stream software may not support it.")},b("React").createElement(b("Image.react"),{className:"_52vx",src:g("142360")})),this.$17(),this.$18()))};a.prototype.$17=function(){return!this.props.isPersistentStreamKeyOptionShown?null:b("React").createElement(b("LeftRight.react"),{className:"_3-8x",direction:"left"},b("React").createElement(b("XUICheckboxInput.react"),{ref:"persistentCheckBox",checked:this.state.isPersistentStreamKeyChecked,disabled:this.state.loadingPersistentStreamURL,onChange:this.$19}),b("React").createElement("div",null,b("React").createElement(b("XUIText.react"),{className:"_3-99 _3-94",size:"meta1"},i._("Use a persistent stream key")),b("React").createElement(b("Tooltip.react"),{position:"above",tooltip:i._("This can be reused every time you go live. You can only broadcast one live video at a time with your persistent stream key.")},b("React").createElement(b("Image.react"),{className:"_52vx",src:g("142360")}),this.$12())))};a.prototype.$18=function(){return b("gkx")("AT7erURBdllHu9HIJ2QiQiGxVu05_5vwyNe1YWqT-uY3is5g9CS0PrXNyK8jQS2NLwDRr0qUTtoAPGgcAHEZ1ylp")?b("React").createElement(b("LeftRight.react"),{className:"_3-8x",direction:"left"},b("React").createElement(b("XUICheckboxInput.react"),{ref:"backupCheckBox",checked:this.state.isBackupStreamChecked,onChange:this.$1}),b("React").createElement("div",null,b("React").createElement(b("XUIText.react"),{className:"_3-99 _3-94",size:"meta1"},i._("Use a backup stream")),b("React").createElement(b("Tooltip.react"),{position:"above",tooltip:i._("A backup stream for your video broadcast")},b("React").createElement(b("Image.react"),{className:"_52vx",src:g("142360")}),this.$13()))):null};a.prototype.$4=function(a,c){this.setState({loadingPersistentStreamURL:!0}),b("promiseDone")(b("GraphAPI")("2.8").object("video_broadcast",a).post({access_token:c,persistent_stream_key_status:b("PersistentStreamKeyStatus").ENABLE}),function(a){this.setState({persistentStreamURL:a.persistent_stream_url,backupPersistentStreamURL:a.backup_persistent_stream_url,loadingPersistentStreamURL:!1})}.bind(this),function(c){new(b("CreateLiveBroadcastUIWaterfallTypedLogger"))().setEvent(b("CreateBroadcastEvent").ENABLE_PERSISTENT_STREAM_KEY_ERROR).setBroadcastID(a).log()})};a.prototype.$2=function(a,c){this.setState({loadingPersistentStreamURL:!0}),b("promiseDone")(b("GraphAPI")("2.8").object("video_broadcast",a).post({access_token:c,persistent_stream_key_status:b("PersistentStreamKeyStatus").REGENERATE}),function(a){this.setState({persistentStreamURL:a.persistent_stream_url,backupPersistentStreamURL:a.backup_persistent_stream_url,loadingPersistentStreamURL:!1})}.bind(this),function(c){new(b("CreateLiveBroadcastUIWaterfallTypedLogger"))().setEvent(b("CreateBroadcastEvent").REGENERATE_PERSISTENT_STREAM_KEY_ERROR).setBroadcastID(a).log()})};a.prototype.$20=function(a,c){this.setState({loadingPersistentStreamURL:!0}),b("promiseDone")(b("GraphAPI")("2.8").object("video_broadcast",a).post({access_token:c,persistent_stream_key_status:b("PersistentStreamKeyStatus").DISABLE}),function(a){this.setState({persistentStreamURL:undefined,backupPersistentStreamURL:undefined,loadingPersistentStreamURL:!1})}.bind(this),function(c){new(b("CreateLiveBroadcastUIWaterfallTypedLogger"))().setEvent(b("CreateBroadcastEvent").DISABLE_PERSISTENT_STREAM_KEY_ERROR).setBroadcastID(a).log()})};e.exports=a}),null);