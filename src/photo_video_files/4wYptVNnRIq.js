if (self.CavalryLogger) { CavalryLogger.start_js(["oEapf"]); }

__d("MercuryAttachmentVideo.react",["cx","ix","CenteredContainer.react","ChatAttachmentAttribution.react","ChatImageWithArrow.react","ChatSpeakingSticker.react","FBOverlayBase.react","FBOverlayContainer.react","FBOverlayElement.react","Image.react","ImmutableObject","MercuryAttachment","MercuryAttachmentViewer","MessengerVideoPlayer.react","React","SpotlightMercurySharedMediaViewer.react","Vector","getPageIDFromThreadID","joinClasses"],(function(a,b,c,d,e,f,g,h){__p&&__p();var i;c=b("React").PropTypes;d=babelHelpers.inherits(a,b("React").Component);i=d&&d.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=i.constructor).call.apply(a,[this].concat(e)),this.state={newSharedPhotosView:null},this.$1=function(){var a=this.props.duration,b=Math.floor(a/60);a=a%60;return a<10?b+":0"+a:b+":"+a}.bind(this),this.openViewer=function(){var a=this.props,c=a.pageID,d=a.videoID,e=a.videoSize;a=a.videoURI;e=new(b("Vector"))(e.width,e.height);b("MercuryAttachmentViewer").renderVideo({pageID:c,videoID:d,videoSize:e,videoURI:a})}.bind(this),this.$2=function(){this.props.videoID&&this.setState({newSharedPhotosView:this.props.videoID})}.bind(this),this.$3=function(){this.setState({newSharedPhotosView:null})}.bind(this),this.$5=function(){if(this.props.isChat)return b("React").createElement("div",null,b("React").createElement(b("ChatImageWithArrow.react"),{height:this.props.thumbSize.height,key:"previewImage",round:!0,source:this.props.thumbnail,width:this.props.thumbSize.width}),b("React").createElement(b("ChatAttachmentAttribution.react"),{attachment:this.props.attachment,key:"chatAttribution"}));else return b("React").createElement(b("Image.react"),{height:this.props.thumbSize.height,width:this.props.thumbSize.width,src:this.props.thumbnail})}.bind(this),this.$6=function(){return this.props.isChat?{}:this.props.thumbSize}.bind(this),c}a.prototype.componentDidMount=function(){"use strict";this.props.onAttachmentLoad&&this.props.onAttachmentLoad(),b("MercuryAttachmentViewer").preload()};a.prototype.$4=function(){"use strict";return b("React").createElement(b("SpotlightMercurySharedMediaViewer.react"),{onClosePhotoView:this.$3,photoID:this.state.newSharedPhotosView,rootClassName:"",threadID:this.props.threadFBID,disableForward:!1})};a.prototype.$7=function(a,c){"use strict";return!a.legacy_attachment_id?null:b("React").createElement(b("MessengerVideoPlayer.react"),{attachment:this.props.attachment,videoData:a,isInThread:!0,isVisible:this.props.isVisible,onClick:c,className:b("joinClasses")(this.props.className,"_n4o _3_om _1wno")})};a.prototype.$8=function(a){"use strict";a=this.props.thumbSize;a={x:a.width,y:a.height};return{legacy_attachment_id:this.props.videoID,original_dimensions:a,start_muted:!0,no_fullscreen:!0,hide_controls_on_finish:!0,url:this.props.videoURI}};a.prototype.render=function(){"use strict";if(this.props.attachment.metadata&&this.props.attachment.metadata.render_as_sticker&&this.props.isChat)return b("React").createElement(b("ChatSpeakingSticker.react"),{videoURI:this.props.videoURI,videoSize:this.props.videoSize});var a=!!b("getPageIDFromThreadID")(this.props.threadID);a=a?this.openViewer:this.$2;var c=this.state.newSharedPhotosView&&this.props.threadFBID?this.$4():null,d=b("MercuryAttachment").hasAttribution(this.props.attachment),e="clearfix _zow _59go"+(d?" _4yjw":"")+(this.props.isChat?" _3ds5":""),f=this.$8(this.props.attachment);f=this.$7(f,a);f=f?f:b("React").createElement(b("FBOverlayContainer.react"),{className:e,key:"overlayContainer",onClick:a,style:this.$6()},b("React").createElement(b("FBOverlayBase.react"),null,this.$5()),b("React").createElement(b("FBOverlayElement.react"),null,b("React").createElement("div",{className:(this.props.isChat?"":"_zox")+(d?" _jt3":"")},b("React").createElement("span",{className:"_zoz"},this.$1()))),b("React").createElement(b("FBOverlayElement.react"),null,b("React").createElement(b("CenteredContainer.react"),{className:d?"_jt3":"",vertical:!0},b("React").createElement(b("Image.react"),{src:h("27983")}))));return this.props.isChat?b("React").createElement("div",null,c,f):b("React").createElement("div",null,c,f,b("React").createElement(b("ChatAttachmentAttribution.react"),{attachment:this.props.attachment,key:"inboxAttribution"}))};a.propTypes={attachment:c.instanceOf(b("ImmutableObject")),duration:c.number.isRequired,isChat:c.bool,isVisible:c.bool,threadID:c.string,threadFBID:c.string,name:c.string.isRequired,onAttachmentLoad:c.func,pageID:c.string,thumbSize:c.shape({height:c.number,width:c.number}).isRequired,thumbnail:c.string.isRequired,videoSize:c.shape({height:c.number,width:c.number}).isRequired,videoID:c.string.isRequired,videoURI:c.string.isRequired};e.exports=a}),null);