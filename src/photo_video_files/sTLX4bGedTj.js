if (self.CavalryLogger) { CavalryLogger.start_js(["jiyUa"]); }

__d("FBStoriesCardMedia.react",["cx","CameraPostMediaHelper","CameraPostTypes","FBLogger","FBStoriesCardImageMedia.react","FBStoriesCardSATPMedia.react","FBStoriesCardVideoMedia.react","FBStoriesTimer","React","VideoPlayerController","XUISpinner.react","createCancelableFunction","emptyFunction"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i=6e3,j=1e3;c=babelHelpers.inherits(a,b("React").Component);h=c&&c.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=h.constructor).call.apply(a,[this].concat(e)),this.state={height:0,showLoadingSpinner:!1,width:0},this.$10=function(a){this.props.onTimeUpdate&&this.props.onTimeUpdate(a)}.bind(this),this.$5=function(){this.$11(i)}.bind(this),this.$8=function(a,b){this.$11(a*j,b)}.bind(this),this.$3=b("createCancelableFunction")(function(){if(this.$1)this.setState({height:this.$1.clientHeight,width:this.$1.clientWidth});else{var a=window.innerHeight,b,c;a<=700?(b=520,c=292):a>=1350?(b=1080,c=608):(b=a*.83625-48,c=b*(292/520));this.setState({height:b,width:c})}}.bind(this)),c}a.prototype.componentDidMount=function(){this.$3(),window.onresize=this.$3,this.$4()&&this.$5()};a.prototype.componentWillUnmount=function(){this.$2&&(this.$2.stop(),delete this.$2),this.$3.cancel()};a.prototype.UNSAFE_componentWillUpdate=function(a){a.paused!==this.props.paused&&(a.paused?this.$2&&this.$2.pause():this.$2&&this.$2.play())};a.prototype.render=function(){__p&&__p();if(!this.props.media)return null;if(this.$6())return b("React").createElement(b("FBStoriesCardImageMedia.react"),{blurImageSource:b("CameraPostMediaHelper").getBlurImageUri(this.props.media),cameraPostType:this.props.cameraPostType,height:this.state.height,imageSource:b("CameraPostMediaHelper").getImageUri(this.props.media),mediaDivRef:function(a){this.$1=a}.bind(this),onMouseDown:this.props.onMouseDown,onMouseUp:this.props.onMouseUp,setupImageTimer:this.$5,showLoadingSpinner:this.state.showLoadingSpinner,updateDimensions:this.$3,width:this.state.width});if(this.$7())return b("React").createElement(b("FBStoriesCardVideoMedia.react"),{blurImageSource:b("CameraPostMediaHelper").getBlurImageUri(this.props.media),cameraPostType:this.props.cameraPostType,height:this.state.height,imageSource:b("CameraPostMediaHelper").getImageUri(this.props.media),isLiveMedia:this.props.isBucketLive,isMuted:this.props.isMediaMuted,isPaused:this.props.paused,mediaDivRef:function(a){this.$1=a}.bind(this),onMouseDown:this.props.onMouseDown,onMouseUp:this.props.onMouseUp,onVideoPaused:this.props.onVideoPaused,setupVideoTimer:this.$8,showLoadingSpinner:this.state.showLoadingSpinner,videoID:b("CameraPostMediaHelper").getId(this.props.media),width:this.state.width});if(this.$4())return b("React").createElement(b("FBStoriesCardSATPMedia.react"),{mediaDivRef:function(a){this.$1=a}.bind(this),onMouseDown:this.props.onMouseDown,onMouseUp:this.props.onMouseUp,satpData:this.props.satpData,showLoadingSpinner:this.state.showLoadingSpinner});var a="Error: media type not found "+String(b("CameraPostMediaHelper").getType(this.props.media));b("FBLogger")("FIXME").mustfix(a);return b("React").createElement(k,{onMouseUp:this.props.onMouseUp,onMouseDown:this.props.onMouseDown})};a.prototype.$6=function(){return b("CameraPostMediaHelper").isImage(this.props.media)&&!this.$4()};a.prototype.$9=function(){return b("CameraPostMediaHelper").isSphericalPhoto(this.props.media)};a.prototype.$4=function(){var a;return((a=this.props)!=null?(a=a.satpData)!=null?a.wwwTextFormatMetadata:a:a)!==null};a.prototype.$7=function(){return b("CameraPostMediaHelper").isVideo(this.props.media)};a.prototype.$11=function(a,c){this.props.onDone&&this.props.onTimeUpdate&&(this.$2=new(b("FBStoriesTimer"))({duration:a,vpc:c}),this.$2.onTick(this.$10),this.props.onDone&&this.$2.onDone(this.props.onDone),this.props.paused||this.$2.play())};a.defaultProps={cameraPostType:b("CameraPostTypes").STORY,isBucketLive:!1,isMediaMuted:!1,media:{__typename:"Video",id:"",image:null,image_blurred:null,preview_image:null},onDone:b("emptyFunction"),onMouseDown:b("emptyFunction"),onMouseUp:b("emptyFunction"),onTimeUpdate:function(a){},onVideoPaused:b("emptyFunction"),paused:!1,satpData:{rootMessageText:"",wwwTextFormatMetadata:null,textFormatMetadata:null,backdropImage:null},threadID:null,userID:null};var k=function(a){return b("React").createElement("div",{className:"_ide",onMouseDown:a.onMouseDown,onMouseUp:a.onMouseUp},b("React").createElement(b("XUISpinner.react"),{background:"dark",className:"_2out",size:"large"}))};e.exports=a}),null);