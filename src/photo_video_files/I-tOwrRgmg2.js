if (self.CavalryLogger) { CavalryLogger.start_js(["tDP9E"]); }

__d("MontageThumbnail.react",["cx","CssBackgroundImage.react","MessengerTextWithEntities.react","React","RelayCompat","MontageThumbnail_message.graphql"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=b("RelayCompat").createFragmentContainer;b("RelayCompat").graphql;d=b("React").PropTypes;var i=28,j=21;f=babelHelpers.inherits(a,b("React").Component);h=f&&f.prototype;function a(){var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=h.constructor).call.apply(a,[this].concat(d)),this.$1=!1,this.state={imageHeight:i,imageWidth:j},this.setDimensions=function(a,b){this.$1&&(this.state.imageHeight!==a||this.state.imageWidth!==b)&&this.setState({imageHeight:a,imageWidth:b})}.bind(this),b}a.prototype.componentDidMount=function(){this.$1=!0};a.prototype.componentWillUnmount=function(){this.$1=!1};a.prototype.render=function(){return b("React").createElement("div",{className:"_4bj3"},this.getFirstImage(),this.renderUnreadBadge())};a.prototype.renderUnreadBadge=function(){return this.props.unread?b("React").createElement("div",{className:"_4bj5",style:{backgroundColor:this.props.customColor}}):null};a.prototype.getFirstImage=function(){__p&&__p();var a=this.props.message;if(!a)return null;if(a.sticker)return this.getImageElement(a.sticker.stickerImage);if(a.blob_attachments&&a.blob_attachments[0]){var c=a.blob_attachments[0];c=c.messageImage||c.videoImage||c.mediaImage;if(c)return this.getImageElement(c)}if(a.message&&a.message.text){return b("React").createElement(b("MessengerTextWithEntities.react"),{className:"_4bj6 _4bj9",customSize:!0,renderEmoji:!0,style:{height:this.props.imageHeight,width:this.props.imageWidth},text:a==null?void 0:(c=a.message)==null?void 0:c.text})}return null};a.prototype.getDimensions=function(a){var b=new Image(),c=this.setDimensions;b.onload=function(){c(b.height,b.width)};b.src=(a==null?void 0:a.uri)||""};a.prototype.getImageElement=function(a){this.props.shouldRecomputeDimensions&&this.getDimensions(a);return b("React").createElement(b("CssBackgroundImage.react"),{className:"_4bj6",height:this.state.imageHeight,imageURI:a==null?void 0:a.uri,width:this.state.imageWidth})};a.propTypes={customColor:d.string,message:d.object.isRequired,unread:d.bool.isRequired,imageHeight:d.number.isRequired,imageWidth:d.number.isRequired,shouldRecomputeDimensions:d.bool.isRequired};e.exports=c(a,{message:{modern:function(){return b("MontageThumbnail_message.graphql")},classic:function(a){return{kind:"FragmentDefinition",argumentDefinitions:[{defaultValue:28,kind:"LocalArgument",name:"imageHeight"},{defaultValue:21,kind:"LocalArgument",name:"imageWidth"}],node:function(){return{children:[{children:[{fieldName:"text",kind:"Field",metadata:{},type:"String"}],fieldName:"message",kind:"Field",metadata:{canHaveSubselections:!0},type:"TextWithEntities"},{children:[{alias:"stickerImage",calls:[{kind:"Call",metadata:{type:"Int"},name:"height",value:{kind:"CallVariable",callVariableName:"imageHeight"}},{kind:"Call",metadata:{type:"Int"},name:"width",value:{kind:"CallVariable",callVariableName:"imageWidth"}}],children:[{fieldName:"uri",kind:"Field",metadata:{},type:"Url"}],fieldName:"image",kind:"Field",metadata:{canHaveSubselections:!0},type:"Image"},{fieldName:"id",kind:"Field",metadata:{isGenerated:!0,isRequisite:!0},type:"ID"}],fieldName:"sticker",kind:"Field",metadata:{canHaveSubselections:!0,inferredRootCallName:"node",inferredPrimaryKey:"id"},type:"Sticker"},{children:[{fieldName:"__typename",kind:"Field",metadata:{isGenerated:!0,isRequisite:!0},type:"String"},{children:[{alias:"mediaImage",calls:[{kind:"Call",metadata:{type:"Int"},name:"height",value:{kind:"CallVariable",callVariableName:"imageHeight"}},{kind:"Call",metadata:{type:"Int"},name:"width",value:{kind:"CallVariable",callVariableName:"imageWidth"}}],children:[{fieldName:"uri",kind:"Field",metadata:{},type:"Url"}],fieldName:"image",kind:"Field",metadata:{canHaveSubselections:!0},type:"Image"},{fieldName:"__typename",kind:"Field",metadata:{isGenerated:!0,isRequisite:!0},type:"String"},{children:[{fieldName:"id",kind:"Field",metadata:{isGenerated:!0,isRequisite:!0},type:"ID"},{fieldName:"__typename",kind:"Field",metadata:{isGenerated:!0,isRequisite:!0},type:"String"}],id:a.__id(),kind:"Fragment",metadata:{isAbstract:!0},name:"IdFragment",type:"Node"}],id:a.__id(),kind:"Fragment",metadata:{isAbstract:!0},name:"Media",type:"Media"},{children:[{alias:"videoImage",calls:[{kind:"Call",metadata:{type:"Int"},name:"height",value:{kind:"CallVariable",callVariableName:"imageHeight"}},{kind:"Call",metadata:{type:"Int"},name:"width",value:{kind:"CallVariable",callVariableName:"imageWidth"}}],children:[{fieldName:"uri",kind:"Field",metadata:{},type:"Url"}],fieldName:"image",kind:"Field",metadata:{canHaveSubselections:!0},type:"Image"},{fieldName:"id",kind:"Field",metadata:{isGenerated:!0,isRequisite:!0},type:"ID"}],id:a.__id(),kind:"Fragment",metadata:{},name:"MessageVideo",type:"MessageVideo"},{children:[{alias:"messageImage",calls:[{kind:"Call",metadata:{type:"Int"},name:"height",value:{kind:"CallVariable",callVariableName:"imageHeight"}},{kind:"Call",metadata:{type:"Int"},name:"width",value:{kind:"CallVariable",callVariableName:"imageWidth"}}],children:[{fieldName:"uri",kind:"Field",metadata:{},type:"Url"}],fieldName:"image",kind:"Field",metadata:{canHaveSubselections:!0},type:"Image"},{fieldName:"id",kind:"Field",metadata:{isGenerated:!0,isRequisite:!0},type:"ID"}],id:a.__id(),kind:"Fragment",metadata:{},name:"MessageImage",type:"MessageImage"},{children:[{fieldName:"id",kind:"Field",metadata:{isGenerated:!0,isRequisite:!0},type:"ID"},{fieldName:"__typename",kind:"Field",metadata:{isGenerated:!0,isRequisite:!0},type:"String"}],id:a.__id(),kind:"Fragment",metadata:{isAbstract:!0},name:"IdFragment",type:"Node"}],fieldName:"blob_attachments",kind:"Field",metadata:{canHaveSubselections:!0,inferredRootCallName:"node",inferredPrimaryKey:"id",isAbstract:!0,isPlural:!0},type:"MessageBlobAttachment"},{fieldName:"id",kind:"Field",metadata:{isGenerated:!0,isRequisite:!0},type:"ID"}],id:a.__id(),kind:"Fragment",metadata:{},name:"MontageThumbnail_message",type:"UserMessage"}}()}}}});e.exports.test=a}),null);