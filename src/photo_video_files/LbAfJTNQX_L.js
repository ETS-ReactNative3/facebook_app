if (self.CavalryLogger) { CavalryLogger.start_js(["ok5Or"]); }

__d("MercuryAttachments.react",["cx","MercuryAttachment","MercuryAttachmentError.react","MercuryAttachmentMalicious.react","MercuryAttachmentRenderer","MessengerHotLikePreview.react","MessengerWebDriverTestIDs","MNCommerceMessageType","React","SubscriptionsHandler","emptyFunction","joinClasses"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=b("React").PropTypes;d=babelHelpers.inherits(a,b("React").Component);h=d&&d.prototype;function a(){var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=h.constructor).call.apply(a,[this].concat(d)),this.$1=function(a){this.props.onAttachmentLoad&&this.props.onAttachmentLoad(a)}.bind(this),this.$2=null,b}a.prototype.componentDidMount=function(){this.$2=new(b("SubscriptionsHandler"))()};a.prototype.componentWillUnmount=function(){this.$2&&this.$2.release()};a.prototype.$3=function(a){__p&&__p();if(b("MercuryAttachment").isStickerAttachment(a))return b("MercuryAttachmentRenderer").constructStickerComponent(this.props.message,this.props.attachments[0].metadata,this.props.onStickerClick,this.props.isChat,this.$1,this.props.customColor);else if(b("MercuryAttachment").isEmojiLikeAttachment(a)){var c=b("MercuryAttachmentRenderer").constructEmojiLikeAttachment(a,this.props.message,this.$1);return c?c:b("React").createElement(b("MercuryAttachmentError.react"),null)}else if(b("MercuryAttachment").isVoiceAttachment(a))return b("MercuryAttachmentRenderer").renderAudioClip(this.props.attachments[0],this.props.isChat,this.props.customColor,this.props.message,this.$1);else if(b("MercuryAttachment").isVideoAttachment(a))return b("MercuryAttachmentRenderer").renderVideo(a,this.props.isChat,this.props.message,this.$1,this.props.isVisible);else if(b("MercuryAttachment").isShareAttachment(a))return b("MercuryAttachmentRenderer").constructStoryBasedShareAttachment(this.props.message,a,this.props.isChat,this.props.maxWidth,this.$1,this.props.isVisible);else if(b("MercuryAttachment").isFileAttachment(a))return b("MercuryAttachmentRenderer").renderFile(a,this.props.isChat,this.$1);else if(b("MercuryAttachment").isErrorAttachment(a))return b("React").createElement(b("MercuryAttachmentError.react"),null);return b("React").createElement(b("MercuryAttachmentMalicious.react"),null)};a.prototype.render=function(){__p&&__p();if(this.props.message.is_like_preview)return b("React").createElement(b("MessengerHotLikePreview.react"),{forGameChat:this.props.forGameChat,isChat:this.props.isChat,key:"hlp:"+this.props.message.like_preview_since,since:this.props.message.like_preview_since,customLike:this.props.message.customLike,customColor:this.props.customColor});if(this.props.attachments.length===0)return b("React").createElement("div",this.props);if(this.props.message.commerce_message_type===b("MNCommerceMessageType").RIDE_INTENT)return b("React").createElement("div",this.props);var a=b("MercuryAttachmentRenderer").renderPhotoAttachments(this.props.attachments.filter(b("MercuryAttachment").isPhotoAttachment),this.props.message,this.props.maxWidth,this.$1),c=b("MercuryAttachmentRenderer").sortAttachmentsStablyByType(this.props.attachments.filter(function(a){return!b("MercuryAttachment").isPhotoAttachment(a)})).map(function(a,c){return b("React").createElement("span",{key:c},this.$3(a))}.bind(this));return b("React").createElement("div",babelHelpers["extends"]({},this.props,{className:b("joinClasses")(this.props.className,c.length>0?"_6dm2":""),"data-testid":b("MessengerWebDriverTestIDs").ATTACHMENT_ROOT}),a,c,this.props.afterDecorators,this.props.renderProgressBar&&this.props.renderProgressBar(),this.props.attachments.every(function(a){return!b("MercuryAttachment").isShareAttachment(a)})?this.props.innerDecorators:null)};a.propTypes={afterDecorators:c.arrayOf(c.element),attachments:c.array.isRequired,className:c.string,customColor:c.string,customLike:c.object,forGameChat:c.bool,maxWidth:c.number.isRequired,message:c.object.isRequired,isChat:c.bool,isVisible:c.bool,onAttachmentLoad:c.func,onStickerClick:c.func,onUnwrap:c.func,innerDecorators:c.element};a.defaultProps={isChat:!1,onAttachmentLoad:b("emptyFunction"),onStickerClick:b("emptyFunction")};e.exports=a}),null);